(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{337:function(t,e){t.exports="data:image/png;base64,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"},469:function(t,e,s){"use strict";s.r(e);var a=s(12),l=Object(a.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#簇的大小导致了文件大小不同"}},[t._v("簇的大小导致了文件大小不同")])]),a("li",[a("a",{attrs:{href:"#实例分析"}},[t._v("实例分析")]),a("ul",[a("li",[a("a",{attrs:{href:"#但是文件管理器显示的是-1kb-而不是-4kb"}},[t._v("但是文件管理器显示的是 1KB，而不是 4KB")])])])]),a("li",[a("a",{attrs:{href:"#补充"}},[t._v("补充")])]),a("li",[a("a",{attrs:{href:"#references"}},[t._v("References")])])])]),a("p"),t._v(" "),a("h1",{attrs:{id:"为什么同一个文件在不同电脑上大小不一样"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么同一个文件在不同电脑上大小不一样"}},[t._v("#")]),t._v(" 为什么同一个文件在不同电脑上大小不一样")]),t._v(" "),a("p",[t._v("今天一个朋友问了我一个问题：为啥同一个文件在不同电脑上大小不一样啊？为啥啊？我直接懵了，这啥啊？为啥啊？直到看到了一篇文章"),a("a",{attrs:{href:"#ref1"}},[a("sup",[t._v("[1]")])]),t._v("，才解答了我和朋友的困惑。")]),t._v(" "),a("h2",{attrs:{id:"簇的大小导致了文件大小不同"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#簇的大小导致了文件大小不同"}},[t._v("#")]),t._v(" 簇的大小导致了文件大小不同")]),t._v(" "),a("p",[t._v("事实上这种事情经常发生，比如你在云盘上存小视频，明明它是 60G。结果下载下来以后，发现你的文件夹变成 80G 了，难道人家还赠送了你 20G 的小视频？这当然不可能发生。")]),t._v(" "),a("p",[t._v("核心原因就是")]),t._v(" "),a("ul",[a("li",[t._v("磁盘空间是按簇来划分的。即使是一个 Byte 大小的文件也会占用一个簇的空间。")]),t._v(" "),a("li",[t._v("磁盘格式化时可以设置簇大小，一般从 512 到 131,072 Bytes。")]),t._v(" "),a("li",[t._v("不同的实用程序以不同的方式显示磁盘空间。")]),t._v(" "),a("li",[t._v("网盘一般显示的是文件的实际大小。")])]),t._v(" "),a("h2",{attrs:{id:"实例分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实例分析"}},[t._v("#")]),t._v(" 实例分析")]),t._v(" "),a("p",[t._v("假设你有一个 1 Byte 的文件，你用命令行查看会是 1 Byte，用文件浏览器看他又成了 1 KB。")]),t._v(" "),a("p",[a("img",{attrs:{src:s(337),alt:"A one-byte file, listed in the Windows Command Prompt"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"D:%5Ccode%5Cblog%5Cblog%5Czh%5Cblogs%5C20210204%5Cone-byte-file-explorer-600x133.png",alt:"A one-byte file, listed in the Windows File Explorer"}})]),t._v(" "),a("p",[t._v("数据在磁盘上会存放在大小为 512 或 4096 Bytes 的扇区上。文件存储系统会记录文件在磁盘上的存储方式相关信息，包括是在哪个扇区上。但是文件系统一般不会一个一个扇区地进行记录和跟踪，而是把多个扇区并在一起管理，称为簇。")]),t._v(" "),a("p",[t._v("簇一般是 1, 2, 4, 8, 16 或更多个相邻扇区。文件系统会记录文件的位置，并维护一个列表，记录分配给文件的簇。")]),t._v(" "),a("p",[t._v("使用 CHKDSK 命令可以查看簇大小（即下图中的一个 allocation unit）。")]),t._v(" "),a("p",[a("img",{attrs:{src:"D:%5Ccode%5Cblog%5Cblog%5Czh%5Cblogs%5C20210204%5Cchkdsk-report.png",alt:"CHKDSK report showing cluster size"}})]),t._v(" "),a("p",[t._v("理论上，当我们创建一个 1 Byte 大小的文件，文件系统会：")]),t._v(" "),a("ul",[a("li",[t._v("在他的文件表中创建一个列表项，俗称为”directory listing”。")]),t._v(" "),a("li",[t._v("从磁盘上分配一个簇来存储文件。")]),t._v(" "),a("li",[t._v("将数据写到磁盘中。")])]),t._v(" "),a("p",[t._v("文件将会被被分配一个簇，即使他不需要这么大的空间。假设簇大小是上图的 4KB，则一个 1 Byte 的文件会消耗 4KB 空间，当它变成 4097 Byte 的时候，它会占用两个簇，从而是 8KB 的空间。")]),t._v(" "),a("h3",{attrs:{id:"但是文件管理器显示的是-1kb-而不是-4kb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#但是文件管理器显示的是-1kb-而不是-4kb"}},[t._v("#")]),t._v(" 但是文件管理器显示的是 1KB，而不是 4KB")]),t._v(" "),a("p",[t._v("事实上，文件系统不止需要记录文件的数据，也需要记录文件名、分配给它的簇、时间戳、标签、权限等等诸多信息，所有的这些元数据（meta-data）都占用了文件 directory listing 中的空间。")]),t._v(" "),a("p",[t._v("在 NTFS 文件系统中，directory listing 的空间是一整块进行分配的，不管元数据实际有多大，每次分配都会是 1,024 Bytes。")]),t._v(" "),a("p",[t._v("所以是这么优化的：当文件很小的时候，不分配簇，而是利用 directory listing 中的剩余空间去存放它。这样，就可以节约簇的分配（这也是为什么你甚至可以看到文件属性中，文件的实际大小比占用空间小，占用空间甚至是0的情况）。")]),t._v(" "),a("h2",{attrs:{id:"补充"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#补充"}},[t._v("#")]),t._v(" 补充")]),t._v(" "),a("p",[t._v("在fat32文件系统的情况下，分区大小在2GB～8GB时簇的大小为4KB；分区大小在8GB～16GB时簇的大小为8KB；分区大小在 16GB～32GB时，簇的大小则达到了16KB。而ntfs格式中，当分区的大小在2GB以下时，簇的大小都比相应的fat32簇小；当分区的大小在2GB以上时(2GB～2TB)，簇的大小都为4KB。也就是说，ntfs可以比fat32更有效地管理磁盘空间，最大限度地避免了磁盘空间的浪费。")]),t._v(" "),a("h2",{attrs:{id:"references"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[t._v("#")]),t._v(" References")]),t._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://askleo.com/why-is-the-same-file-a-different-size-in-different-places/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Why is the Same File a Different Size in Different Places?"),a("OutboundLink")],1),t._v(" "),a("div",{attrs:{id:"ref1"}})])]),t._v(" "),a("Comment",{attrs:{lang:"zh-CN"}})],1)}),[],!1,null,null,null);e.default=l.exports}}]);