(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{461:function(t,a,s){"use strict";s.r(a);var n=s(12),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"ns3-ç®€è®°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ns3-ç®€è®°"}},[t._v("#")]),t._v(" NS3 ç®€è®°")]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#è¿è¡Œè„šæœ¬"}},[t._v("è¿è¡Œè„šæœ¬")])]),s("li",[s("a",{attrs:{href:"#æœ¬åœ°ç¼–è¯‘æ–‡æ¡£"}},[t._v("æœ¬åœ°ç¼–è¯‘æ–‡æ¡£")])]),s("li",[s("a",{attrs:{href:"#trace"}},[t._v("Trace")])]),s("li",[s("a",{attrs:{href:"#context"}},[t._v("Context")])]),s("li",[s("a",{attrs:{href:"#åœ¨å·²æœ‰çš„æ¨¡å—é‡Œæ–°å¢æ–‡ä»¶"}},[t._v("åœ¨å·²æœ‰çš„æ¨¡å—é‡Œæ–°å¢æ–‡ä»¶")])]),s("li",[s("a",{attrs:{href:"#python-binding"}},[t._v("Python binding")])]),s("li",[s("a",{attrs:{href:"#ns3æ··ç¼–-embedding-python"}},[t._v("ns3æ··ç¼–(embedding) Python")]),s("ul",[s("li",[s("a",{attrs:{href:"#ä¸€èˆ¬æƒ…å†µä¸‹çš„c-pythonæ··ç¼–"}},[t._v("ä¸€èˆ¬æƒ…å†µä¸‹çš„c++/pythonæ··ç¼–")])]),s("li",[s("a",{attrs:{href:"#å¯è¡Œæ–¹æ¡ˆ-ä¿®æ”¹wscript"}},[t._v("å¯è¡Œæ–¹æ¡ˆï¼šä¿®æ”¹wscript")])]),s("li",[s("a",{attrs:{href:"#è¡¥å……-ns3æ–‡æ¡£ä¸­ç›¸å…³å†…å®¹"}},[t._v("è¡¥å……ï¼šns3æ–‡æ¡£ä¸­ç›¸å…³å†…å®¹")])])])]),s("li",[s("a",{attrs:{href:"#ä¸€ä¸ªå¾ˆæœ‰è¶£çš„repo"}},[t._v("ä¸€ä¸ªå¾ˆæœ‰è¶£çš„repo")])]),s("li",[s("a",{attrs:{href:"#tips"}},[t._v("TIPS")])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"è¿è¡Œè„šæœ¬"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è¿è¡Œè„šæœ¬"}},[t._v("#")]),t._v(" è¿è¡Œè„šæœ¬")]),t._v(" "),s("p",[t._v("è¿è¡Œc++è„šæœ¬ "),s("code",[t._v('./waf --run=app_name --command-template="%s --arg_name=arg_value"')]),t._v("ã€‚è¦è°ƒç”¨gdbå¯ä»¥åœ¨command-templateé‡Œé¢åŠ ï¼Œå¦‚"),s("code",[t._v('--command-template="gdb %s --arg_name=arg_value"')]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœæ˜¯pythonè„šæœ¬ï¼Œæ˜¯è¦ç”¨ "),s("code",[t._v('./waf --pyrun=app_path --command-template="%s --arg_name=arg_value"')]),t._v("ã€‚æ³¨æ„è¿™é‡Œè¦ç”¨è·¯å¾„ï¼Œä¸åƒè¿è¡Œc++è„šæœ¬å¯ä»¥ç›´æ¥å†™"),s("code",[t._v("scratch")]),t._v("ç›®å½•ä¸‹çš„è„šæœ¬åå­—ã€‚")]),t._v(" "),s("p",[t._v("è·‘pythonè„šæœ¬çš„æ—¶å€™åœ¨"),s("code",[t._v("scratch")]),t._v("ç›®å½•ç”Ÿæˆ"),s("code",[t._v("__pycache__")]),t._v("å¯èƒ½ä¼šå¯¼è‡´ä»»åŠ¡æ‰§è¡Œå¤±è´¥ï¼Œè¦åŠæ—¶æ¸…ç†æ‰cacheã€‚ä¹Ÿå¯ä»¥æ”¹ns3æ ¹ç›®å½•ä¸‹çš„"),s("code",[t._v("wscript")]),t._v("ä¸­çš„"),s("code",[t._v("def add_scratch_programs(bld)")]),t._v("å‡½æ•°è‡ªåŠ¨è·³è¿‡è¯¥ç›®å½•ã€‚")]),t._v(" "),s("h2",{attrs:{id:"æœ¬åœ°ç¼–è¯‘æ–‡æ¡£"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æœ¬åœ°ç¼–è¯‘æ–‡æ¡£"}},[t._v("#")]),t._v(" æœ¬åœ°ç¼–è¯‘æ–‡æ¡£")]),t._v(" "),s("p",[t._v("åœ¨çº¿æ–‡æ¡£æœ‰äº›æ…¢ï¼Œä¸å¦‚åœ¨æœ¬åœ°ç¼–è¯‘ä¸€ä¸ªã€‚éœ€è¦å®‰è£…doxygenï¼ŒåŒæ—¶é‡æ–°é…ç½®ä¸€ä¸‹waf")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" doxygen\n./waf configure --enable-examples --enable-tests\n./waf --doxygen\n")])])]),s("p",[t._v("å¦‚æœå‡ºç°é”™è¯¯æç¤ºæŸäº›è„šæœ¬é‡Œå­˜åœ¨"),s("code",[t._v("'\\r'")]),t._v("ä¸èƒ½è¯†åˆ«ï¼Œå¯èƒ½æ˜¯å› ä¸ºLinuxä¸‹æ¢è¡Œç¬¦å’ŒWindowsä¸‹ä¸åŒï¼Œç”¨VScodeè¿™äº›ç¼–è¾‘å™¨è½¬æ¢CRLFåˆ°LFå°±è¡Œäº†ã€‚")]),t._v(" "),s("h2",{attrs:{id:"trace"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#trace"}},[t._v("#")]),t._v(" Trace")]),t._v(" "),s("p",[t._v("ns3çš„traceç³»ç»Ÿå®šä¹‰äº†ä¸€ç³»åˆ—çš„sourceå»è¿½è¸ªä¸åŒçš„å˜é‡ï¼Œåœ¨å˜é‡å‘ç”Ÿå˜åŒ–æ—¶å¯ä»¥è§¦å‘sinkè®°å½•è¿™ç§å˜åŒ–ã€‚åœ¨è¿è¡Œæ¨¡æ‹Ÿå®éªŒæ—¶ï¼Œé€šè¿‡ç”¨æˆ·å®šä¹‰çš„å›è°ƒå‡½æ•°æ¥åšä¸ºtrace souceçš„trace sinkã€‚è¿™äº›sourceå›è°ƒå‡½æ•°ä¸€èˆ¬åœ¨ç±»å†…å®šä¹‰ä¸ºç§æœ‰å˜é‡ï¼Œå‘½åè§„åˆ™ä¸º"),s("code",[t._v("m_aTraceFunction")]),t._v("ã€‚åœ¨å®šä¹‰çš„æ—¶å€™ï¼Œè¿™äº›å›è°ƒå‡½æ•°çš„ç±»å‹ä¸º"),s("code",[t._v("TracedCallback<T1, T2, ...>")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("éœ€è¦æŒ‡å‡ºï¼Œns3çš„å›è°ƒå‡½æ•°çš„è¿”å›ç±»å‹é»˜è®¤éƒ½æ˜¯"),s("code",[t._v("void")]),t._v("ï¼Œæ¨¡æ¿ä¸­çš„"),s("code",[t._v("T")]),t._v("æ˜¯å›è°ƒå‡½æ•°çš„å‚æ•°å˜é‡ç±»å‹ã€‚é‚£ä¹ˆæˆ‘ä»¬åœ¨å†™sinkçš„æ—¶å€™ï¼Œéœ€è¦å®šä¹‰æˆ"),s("code",[t._v("void aTraceSink(std::string context, T1 xx, T2 xx, ...)")]),t._v("ã€‚è¿™é‡Œçš„"),s("code",[t._v("std::string context")]),t._v("æ˜¯è¡¨æ˜æˆ‘ä»¬è‡ªå®šä¹‰sinkä¸å“ªä¸ªsourceç›¸è¿æ¥çš„ï¼Œå³æ­¤åˆ»çš„å˜åŒ–æ˜¯ä»å“ªä¸ªèŠ‚ç‚¹å‘å‡ºçš„ã€‚")]),t._v(" "),s("p",[t._v("ç»‘å®šsinkå›è°ƒæ—¶å€™ä½¿ç”¨"),s("code",[t._v("Config::Connet(a context, MakeCallback(&aTraceSink))")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("è‡ªå®šä¹‰sinkçš„æ—¶å€™ï¼Œ"),s("code",[t._v("std::string context")]),t._v("å‚æ•°ä¹Ÿå¯ä»¥çœç•¥æ‰ï¼Œå†™æˆ"),s("code",[t._v("void anotherTraceSink(T1 xx, T2 xx, ...)")]),t._v("ï¼Œåœ¨ç»‘å®šåˆ°ç›‘å¬çš„å¯¹è±¡ä¸Šæ—¶ä½¿ç”¨çš„æ˜¯"),s("code",[t._v("Config::ConnectWithoutContext")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("ç»‘å®šsinkä¹Ÿå¯ä»¥ç”¨"),s("code",[t._v("obj.TraceConnect")]),t._v("å’Œ"),s("code",[t._v("obj.TraceConnectWithoutContext")]),t._v("ç»‘å®šåˆ°ä¸€ä¸ªå…·ä½“çš„å¯¹è±¡ä¸Šï¼Œç”¨æ³•ä¸"),s("code",[t._v("Config::Connect")]),t._v("ç±»ä¼¼ï¼Œå› ä¸ºåè€…æœ¬æ¥å°±æ˜¯è°ƒç”¨äº†å‰è€…å®ç°çš„ï¼Œè¯¦è§å®˜æ–¹tutorialã€‚")]),t._v(" "),s("h2",{attrs:{id:"context"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#context"}},[t._v("#")]),t._v(" Context")]),t._v(" "),s("p",[t._v("Contextå…¶å®å°±æ˜¯èŠ‚ç‚¹ã€åº”ç”¨ã€å‡½æ•°çš„åå­—ï¼Œæ¯”å¦‚"),s("code",[t._v("/NodeList/*/DeviceList/*/$ns3::WifiNetDevice/Mac/$ns3::AdhocWifiMac/Txop/CwTrace")]),t._v("å†™çš„æ˜¯ä»»æ„èŠ‚ç‚¹ä¸Šçš„ä»»æ„ç½‘å¡ä¸Šçš„ä»»æ„æ— çº¿ç½‘å¡ä¸Šçš„Macå±‚çš„ä¼ è¾“æ—¶çš„congestion windowçš„Traceï¼Ÿç„¶ååœ¨ns3æ–‡æ¡£çš„apiåˆ—è¡¨ä¸­æ‰¾åˆ°"),s("code",[t._v("CwTrace")]),t._v("çš„å®šä¹‰ï¼Œå†™ä¸€ä¸ªå›è°ƒç”¨"),s("code",[t._v("Config::Connect")]),t._v("åˆ°è¿™ä¸ªcontextå°±å¯ä»¥ç›‘å¬äº†ã€‚ç”¨ä¸‹é¢çš„å‡½æ•°å¯ä»¥ä¾¿æ·åœ°ä»Contextä¸­æå–NodeIdã€‚")]),t._v(" "),s("div",{staticClass:"language-c++ extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('uint32_t ContextToNodeId(std::string context) {\n    std::string sub = context.substr(10); // skip "/NodeList/"\n    uint32_t pos = sub.find("/Device");\n    NS_LOG_DEBUG("Found NodeId " << atoi(sub.substr(0, pos).c_str()));\n    return atoi(sub.substr(0, pos).c_str());\n}\n')])])]),s("h2",{attrs:{id:"åœ¨å·²æœ‰çš„æ¨¡å—é‡Œæ–°å¢æ–‡ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åœ¨å·²æœ‰çš„æ¨¡å—é‡Œæ–°å¢æ–‡ä»¶"}},[t._v("#")]),t._v(" åœ¨å·²æœ‰çš„æ¨¡å—é‡Œæ–°å¢æ–‡ä»¶")]),t._v(" "),s("p",[t._v("è®°å¾—æ”¹æ¨¡å—ç›®å½•ä¸‹çš„wscriptï¼ŒæŠŠæ–°å¢çš„æ–‡ä»¶ç¼–è¯‘è¿›"),s("code",[t._v("build/ns3")]),t._v("é‡Œï¼Œå¦åˆ™å»"),s("code",[t._v("scrach")]),t._v("ä¸‹å†™æµ‹è¯•è¿˜æ˜¯æ‰¾ä¸åˆ°æ–°å¢çš„æ–‡ä»¶ã€‚")]),t._v(" "),s("p",[t._v("æœ‰æ—¶å€™ä¼šç ´åpython bindingçš„æ–‡ä»¶ä¾èµ–ï¼Œä¸ä¼šæ”¹æ¨¡å—bindingç›®å½•ä¸‹çš„è®¾ç½®ï¼ŒæŠŠpython bindingå…³äº†ä¸è¦ç”Ÿæˆpythonçš„å¯¹åº”åŒ…äº†= ="),s("code",[t._v(".\\build -- --diable-python")]),t._v(" æˆ–è€…"),s("code",[t._v(".\\nsxxx\\waf configure --disable-python")])]),t._v(" "),s("p",[t._v("å¦‚æœæ˜¯æ–°å¢æ¨¡å—ï¼Œå¯ä»¥ç”¨wafè‡ªåŠ¨ç”Ÿæˆï¼Œè¯¦è§å®˜æ–¹æ–‡æ¡£ã€‚")]),t._v(" "),s("h2",{attrs:{id:"python-binding"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#python-binding"}},[t._v("#")]),t._v(" Python binding")]),t._v(" "),s("p",[t._v("å¦‚æœä¸éœ€è¦python bindingï¼Œåªç”¨C++ï¼Œå®˜æ–¹å»ºè®®å°±æ˜¯ç›´æ¥ç”¨"),s("code",[t._v("./build.py -- --disable-python")]),t._v("æˆ–"),s("code",[t._v("./waf --disable-python")]),t._v("ï¼Œè¿™æ ·buildå¿«è€Œä¸”ä¸ä¼šå‡ºç°å’Œpythonæœ‰å…³çš„é—®é¢˜ã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœæƒ³ç”¨python bindingï¼Œä½†æ¿€æ´»äº†Anacondaä¸­çš„ç¯å¢ƒï¼Œåœ¨buildæ—¶python bindingä¼šæ— æ³•enableã€‚")]),t._v(" "),s("p",[t._v("ä½¿ç”¨"),s("code",[t._v(".\\waf configure")]),t._v('ä¹‹åï¼Œå‘ç°å…·ä½“é—®é¢˜æ˜¯"Testing pyembed configuration   : Could not build a python embedded interpreter"é”™è¯¯ã€‚')]),t._v(" "),s("p",[t._v("ä¼¼ä¹å¾ˆå¤šä½¿ç”¨wafæ„å»ºçš„é¡¹ç›®ä¸­éƒ½ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æ‰¾ä¸åˆ°åˆé€‚çš„è§£å†³æ–¹æ³•ã€‚å°è¯•æŠŠanacondaç¯å¢ƒdeactivatedæ‰å°±å¥½äº†ã€‚è¿™é‡Œdeactivatedåï¼Œæœ€å¥½æ”¹ä¸€ä¸‹"),s("code",[t._v("build.py")]),t._v(" å’Œ"),s("code",[t._v("waf")]),t._v("ä¸­çš„è§£é‡Šå™¨ï¼Œé»˜è®¤æ˜¯"),s("code",[t._v("#! /usr/bin/env python")]),t._v("åœ¨ä¸€äº›æœºå™¨ä¸Šå¯èƒ½ä¼šå»è°ƒç”¨"),s("code",[t._v("pyhon2")]),t._v("ã€‚æ”¹æˆ"),s("code",[t._v("#! /usr/bin/env python3")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("ç„¶ååœ¨ç”¨å®˜æ–¹æä¾›çš„"),s("code",[t._v("build.py")]),t._v("è„šæœ¬æˆ–è€…ç”¨"),s("code",[t._v("waf")]),t._v("æ„å»ºåï¼Œå†æ¿€æ´»Anacondaä¸­çš„æŸä¸ªç¯å¢ƒï¼Œ"),s("code",[t._v("waf")]),t._v("ä¼šè‡ªåŠ¨linkä¸€ébuildè¿‡çš„python bindingï¼Œåœ¨Anacondaçš„æŸä¸ªç¯å¢ƒé‡Œå°±å¯ç”¨äº†~")]),t._v(" "),s("p",[t._v("å¯æƒœä¸€åˆ‡åŠªåŠ›å…¨éƒ¨æœ¨å¤§äº†ã€‚python bindingä¸æ”¯æŒå¾ˆå¤šåº•å±‚çš„apiï¼Œè€Œä¸”"),s("strong",[t._v("ä¸æ”¯æŒä½¿ç”¨å›è°ƒçš„tracing")]),t._v("ï¼Œåªå¯ä»¥ä½¿ç”¨pcapå’Œasciiæ–‡ä»¶ã€‚åŒæ—¶åé¢ä¼šæåˆ°çš„ä¸€ä¸ªrepoï¼Œæˆ‘è¿™è¾¹åˆbuildä¸äº†ï¼Œè¿™ä¹Ÿå¯¼è‡´æˆ‘åªèƒ½å»è€ƒè™‘åœ¨ns3ä¸­æ··ç¼–pythonï¼Œé‡åˆ°äº†å¾ˆå¤šæ–°å‘ã€‚")]),t._v(" "),s("h2",{attrs:{id:"ns3æ··ç¼–-embedding-python"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ns3æ··ç¼–-embedding-python"}},[t._v("#")]),t._v(" ns3æ··ç¼–(embedding) Python")]),t._v(" "),s("p",[t._v("ç›´æ¥ç”¨python bindingæ˜¯ä¸å¯èƒ½äº†ï¼Œè™½ç„¶æœ‰C++çš„tensorflowï¼Œä½†æ˜¯çœ‹äº†ä¸€ä¸‹é…ç½®åˆå¾ˆéº»çƒ¦ã€‚å°±æƒ³ç”¨cppè°ƒç”¨pythonï¼ŒæŸ¥äº†ä¸€ä¸‹å†™äº†ä¸€äº›æµ‹è¯•ä¼¼ä¹å¾ˆæ–¹ä¾¿å˜›ã€‚æƒ³ç€è¿™æ ·ç®—æ³•çš„å®ç°ä¸Šå¯ä»¥ç”¨pythonçµæ´»ç®€å•ä¸€ç‚¹ï¼Œä¹Ÿæœ‰å¤§æ®µç°æˆçš„ç®—æ³•å®ç°ã€‚é‚£å°±çœ‹çœ‹æ€ä¹ˆembedding python into c++ã€‚ğŸ˜‹")]),t._v(" "),s("h3",{attrs:{id:"ä¸€èˆ¬æƒ…å†µä¸‹çš„c-pythonæ··ç¼–"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€èˆ¬æƒ…å†µä¸‹çš„c-pythonæ··ç¼–"}},[t._v("#")]),t._v(" ä¸€èˆ¬æƒ…å†µä¸‹çš„c++/pythonæ··ç¼–")]),t._v(" "),s("p",[t._v("ä¸€èˆ¬çš„æƒ…å†µä¸‹ï¼Œåœ¨C++ä¸­æ··ç¼–pythonåªéœ€è¦åŠ ä¸Špythonçš„å¤´æ–‡ä»¶"),s("code",[t._v("#include 'Python.h'")]),t._v(" ï¼ˆè¿™é‡Œè¦æ³¨æ„å¯èƒ½éœ€è¦ç”¨ç»å¯¹è·¯å¾„ï¼Œçœ‹ä½ pythonæ€ä¹ˆè£…çš„ï¼‰ï¼Œç„¶åä¸ºg++æ·»åŠ å¦‚ä¸‹å‚æ•°è¿›è¡Œç¼–è¯‘å°±è¡Œäº†")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("g++ callpy.cpp "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("python3-config --cflags"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("python3-config --ldflags"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" -fPIC "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ·»åŠ çš„å‚æ•°ä¼šè‡ªåŠ¨å±•å¼€ä¸ºå¤´æ–‡ä»¶å’Œé“¾æ¥åº“å‚æ•°")]),t._v("\n")])])]),s("p",[t._v("ä½¿ç”¨"),s("code",[t._v("Py_Initialize ();")]),t._v("å’Œ"),s("code",[t._v("Py_Finalize ();")]),t._v("å¯ä»¥åˆå§‹åŒ–å’Œå…³é—­Pythonè§£é‡Šå™¨ã€‚åœ¨C++ä¸­ï¼Œpythonçš„å˜é‡éƒ½è¢«åˆ›å»ºä¸ºä¸€ä¸ªç±»å‹ä¸º"),s("code",[t._v("PyObject")]),t._v("çš„æŒ‡é’ˆã€‚")]),t._v(" "),s("p",[t._v("æ¨¡å—å¯¼å…¥æ–¹é¢ï¼Œè‹¥æ˜¯ä½¿ç”¨ "),s("code",[t._v('PyRun_SimpleString ("import os");')]),t._v("å¯¼å…¥æ¨¡å—ï¼Œåˆ™æ¨¡å—åœ¨C++ä»£ç ä¸­å¯è§ï¼Œå¯ä»¥ä½¿ç”¨"),s("code",[t._v("PyRun_SimpleString (print(os.getcwd())ï¼›")]),t._v("è‹¥ä½¿ç”¨çš„æ˜¯ "),s("code",[t._v('pName = PyUnicode_DecodeFSDefault ("os"); pModule = PyImport_ImportModule (pName);')]),t._v("å¯¼å…¥æ¨¡å—ï¼Œåˆ™æ— æ³•é€šè¿‡``PyRun_SimpleString"),s("code",[t._v("å»ä½¿ç”¨")]),t._v("os`ã€‚")]),t._v(" "),s("p",[t._v("ä½¿ç”¨"),s("code",[t._v("PyModule_GetDict(pModule)")]),t._v("ä»æ¨¡å—ä¸­è·å–ä¸€ä¸ªå­—å…¸ç»“æ„ã€‚")]),t._v(" "),s("p",[t._v("ä½¿ç”¨"),s("code",[t._v('pFunc = PyDict_GetItemString(pDict,"disp")')]),t._v("å»ä»å­—å…¸ä¸­è·å–åä¸º"),s("code",[t._v("disp")]),t._v("çš„å‡½æ•°ï¼Œä½¿ç”¨"),s("code",[t._v("PyCallable_Check(pFunc)")]),t._v("æ£€æŸ¥è·å–çš„æŒ‡é’ˆæ˜¯å¦æŒ‡å‘ä¸€ä¸ªå¯ä»¥è°ƒç”¨çš„å‡½æ•°ã€‚")]),t._v(" "),s("p",[s("code",[t._v("pArgs = PyTuple_New(0)")]),t._v("åˆ›å»ºä¸€ä¸ªç©ºçš„å…ƒç»„"),s("code",[t._v("pArgs")]),t._v("å»ä½œä¸ºå‡½æ•°å‚æ•°ï¼Œå®ƒå¯ä»¥é€šè¿‡"),s("code",[t._v('PyTuple_SetItem(pArgs, 0, Py_BuildValue(""));')]),t._v(" åˆå§‹åŒ–ï¼Œä¹‹åä½¿ç”¨"),s("code",[t._v("PyObject_CallObject (pFunc, pArgs);")]),t._v("è°ƒç”¨å‡½æ•°ã€‚")]),t._v(" "),s("p",[t._v("ä½¿ç”¨å‡½æ•°"),s("code",[t._v("PyObject* Py_BuildValue(char *format, ...)")]),t._v("å¯ä»¥æŠŠC++çš„å˜é‡è½¬æ¢æˆä¸€ä¸ªPythonå¯¹è±¡ã€‚å½“éœ€è¦ä»C++ä¼ é€’å˜é‡åˆ°Pythonæ—¶ï¼Œå°±ä¼šä½¿ç”¨è¿™ä¸ªå‡½æ•°ã€‚"),s("code",[t._v("format")]),t._v("å‚æ•°ä¸­å¸¸ç”¨çš„æ ¼å¼æœ‰")]),t._v(" "),s("ul",[s("li",[t._v("i è¡¨ç¤ºint")]),t._v(" "),s("li",[t._v("I è¡¨ç¤ºunsigned int")]),t._v(" "),s("li",[t._v("f è¡¨ç¤ºfloat")]),t._v(" "),s("li",[t._v("O è¡¨ç¤ºä¸€ä¸ªPythonå¯¹è±¡")]),t._v(" "),s("li",[t._v("æ›´å¤šè§Python"),s("a",{attrs:{href:"https://docs.python.org/3/c-api/arg.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ–‡æ¡£"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("ä¾‹å¦‚"),s("code",[t._v('PyTuple_SetItem(pArgs, 0, Py_BuildValue("i",3));')]),t._v("ï¼ŒæŠŠç¬¬ä¸€ä¸ªå‚æ•°è®¾ç½®æˆäº†æ•´å‹å˜é‡3ã€‚å¦‚æœæ˜¯ç›´æ¥ç”¨å»æ„é€ å‡½æ•°çš„å‚æ•°ï¼Œå¾€å¾€éœ€è¦å†™æˆå…ƒç»„å½¢å¼å¦‚"),s("code",[t._v('pArgs=Py_BuildValue("(ii)",3,3)')]),t._v("ï¼Œåœ¨åªæœ‰ä¸€ä¸ªå‚æ•°çš„æ—¶å€™å°¤å…¶éœ€è¦æ³¨æ„å¦‚"),s("code",[t._v('pArgs=Py_BuildValue("(i)",3)')]),t._v("ã€‚æƒ³è¦å–å‡ºpythonå‡½æ•°çš„è¿”å›å€¼è¦ç”¨"),s("code",[t._v("PyArg_Parse")]),t._v("æˆ–"),s("code",[t._v("PyArg_ParseTuple")]),t._v("ï¼Œä½¿ç”¨å¼•ç”¨ä¼ é€’æŒ‰ä¸Šé¢çš„"),s("code",[t._v("format")]),t._v("å­—ç¬¦ä¸²èµ‹å€¼ç»™C++å˜é‡ï¼Œå¦‚"),s("code",[t._v('PyArg_Parse (retObj, "d", &ret);')]),t._v("ã€‚è¿™äº›apiåœ¨ä½¿ç”¨çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„"),s("code",[t._v("format")]),t._v("å­—ç¬¦ä¸²ä¸­çš„æ•°æ®æ ¼å¼ï¼å¦‚æœæŠŠæ•°æ®æ ¼å¼å†™é”™äº†ï¼Œbugä¼šå¾ˆéš¾æ‰¾ã€‚")]),t._v(" "),s("p",[t._v("ä½¿ç”¨"),s("code",[t._v('instanceObj = PyObject_CallMethod(pModule,"clsName",NULL);')]),t._v("å¯ä»¥åˆ›å»ºä¸€ä¸ª"),s("code",[t._v("clsName")]),t._v("ç±»å‹çš„å¯¹è±¡ã€‚å¯¹è±¡çš„"),s("code",[t._v("disp")]),t._v("æ–¹æ³•å¯ä»¥ç”¨"),s("code",[t._v('PyObject_CallMethod(instanceObj,"disp",NULL)')]),t._v("è°ƒç”¨ï¼Œå¦‚æœé™„åŠ å‚æ•°çš„è¯éœ€è¦ç›´æ¥ç”¨å‰é¢"),s("code",[t._v("format")]),t._v("å‚æ•°çš„æ¨¡æ¿è¯­æ³•ã€‚ï¼ˆå®˜æ–¹æ–‡æ¡£æ¨èä½¿ç”¨"),s("code",[t._v("PyInstanceMethod_New")]),t._v("å»åˆ›å»ºå®ä¾‹ï¼Œä½†æ˜¯å®é™…ä½¿ç”¨æ—¶ä¼¼ä¹åˆ›å»ºå¤±è´¥ä¹Ÿä¸ä¼šè¿”å›NULLï¼Œå¯¼è‡´å¾ˆéš¾debugï¼‰ã€‚")]),t._v(" "),s("p",[t._v("åœ¨pythonä»£ç ä¸­ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ€æƒ³ï¼Œæ˜¯ä¸ºäº†ç»´æŠ¤ä¸€äº›åœ¨C++ä¸­è°ƒç”¨æ–¹æ³•å»æ›´æ”¹çš„å˜é‡ã€‚åæ¥æµ‹è¯•å‘ç°åœ¨C++ä¸­ä½¿ç”¨"),s("code",[t._v("PyImport_ImportModule()")]),t._v("åŠ è½½æ¨¡å—åï¼Œæ¨¡å—ä¸­çš„å…¨å±€å˜é‡ä¼šè‡ªåŠ¨åŠ è½½ï¼Œå› æ­¤åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥é€šè¿‡globalå…³é”®å­—ç»´æŠ¤å…¨å±€å˜é‡ï¼Œé¿å…ä½¿ç”¨å¯¹è±¡çš„æ¦‚å¿µï¼Œåœ¨C++é‡Œè°ƒç”¨çš„æ—¶å€™ä¼šç®€å•ä¸€äº›ã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœåœ¨C++ä¸­å¯¼å…¥pyè„šæœ¬å‡ºç°é”™è¯¯ï¼Œè¯•ç€å…ˆç‹¬ç«‹è¿è¡Œpythonè„šæœ¬ï¼Œç¡®ä¿å®ƒæ˜¯æ­£ç¡®çš„ã€‚å‡ºç°é—®é¢˜æ—¶å°è¯•printè¾“å‡ºè°ƒè¯•ï¼Œpythonä¸­çš„é”™è¯¯æ²¡æ³•æŠ¥å‡ºæ¥ï¼Œåªèƒ½"),s("code",[t._v("print()")]),t._v("è¾“å‡ºè°ƒè¯•ã€‚")]),t._v(" "),s("p",[t._v("æ›´å¤šå…·ä½“çš„æ··ç¼–å†™æ³•ï¼Œå¯ä»¥å‚è€ƒ"),s("a",{attrs:{href:"https://docs.python.org/3/c-api/",target:"_blank",rel:"noopener noreferrer"}},[t._v("pythonå®˜æ–¹æ–‡æ¡£"),s("OutboundLink")],1),t._v("ä¸­çš„ä»‹ç»ã€‚")]),t._v(" "),s("h3",{attrs:{id:"å¯è¡Œæ–¹æ¡ˆ-ä¿®æ”¹wscript"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¯è¡Œæ–¹æ¡ˆ-ä¿®æ”¹wscript"}},[t._v("#")]),t._v(" å¯è¡Œæ–¹æ¡ˆï¼šä¿®æ”¹wscript")]),t._v(" "),s("p",[t._v("ä½†æ˜¯å†™äº†ä¸€æ®µæ—¶é—´çœŸæŠŠcppå’Œpythonå¾€ä¸€èµ·æ•´åˆçš„æ—¶å€™ï¼Œæ‰å‘ç°ï¼Œâ€œä¸å¯¹å•Šï¼Œns3æ˜¯ç”¨wafå»ç®¡ç†ç¼–è¯‘è¿‡ç¨‹çš„â€ã€‚ğŸ‘¿å¤©çœŸåœ°ä»¥ä¸ºæŠŠ"),s("code",[t._v("build")]),t._v("ç›®å½•ä¸‹çš„"),s("code",[t._v("ns3")]),t._v("å¤´æ–‡ä»¶å’Œ"),s("code",[t._v("lib")]),t._v("é‡Œçš„åŠ¨æ€é“¾æ¥åº“çš„è·¯å¾„éƒ½åŠ åˆ°g++åå°±è¡Œäº†ã€‚ä½†æ˜¯æœç„¶å¤±è´¥äº†â€¦â€¦")]),t._v(" "),s("p",[t._v("äºæ˜¯æ±‚åŠ©ä¸‡èƒ½çš„googleï¼Œå¯æƒœç½‘ä¸Šä¼¼ä¹æ²¡æœ‰è¿™ä¹ˆå¹²çš„äºº= =ã€‚æ²¡åŠæ³•ï¼Œè‡ªå·±å»è¯»äº†ä¸€ä¸‹"),s("a",{attrs:{href:"https://waf.io/apidocs/tools/python.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("wafçš„æ–‡æ¡£"),s("OutboundLink")],1),t._v("å§ï¼Œåˆšå¥½å‘ç°äº†è¿™æ®µ")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Support for Python, detect the headers and libraries and provide use variables to link C/C++ programs against them:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\topt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'compiler_c python'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configure")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'compiler_c python'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("check_python_version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("check_python_headers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bld"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    bld"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("program"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("features"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pyembed'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" source"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a.c'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" target"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myprog'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    bld"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("shlib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("features"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pyext'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" source"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'b.c'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" target"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mylib'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("å‡è®¾ç¯å¢ƒéƒ½åˆé€‚ï¼Œé‚£è¿™æ®µçš„æ„æ€å°±æ˜¯ï¼Œè¦åœ¨wafä¸­ä½¿ç”¨c++å’Œpythonæ··ç¼–ï¼Œåªéœ€è¦åœ¨"),s("code",[t._v("build")]),t._v("å‡½æ•°é‡Œé¢è°ƒç”¨ "),s("code",[t._v("bld.program(features='pyembed', source='a.c', target='myprog')")]),t._v("ã€‚å†æµ“ç¼©ä¸€ä¸‹ï¼Œå°±æ˜¯è¦æŠŠç”Ÿæˆç¨‹åºçš„å‡½æ•°çš„"),s("code",[t._v("feature")]),t._v("å‚æ•°è®¾ç½®æˆ"),s("code",[t._v("'pyembed'")]),t._v("ã€‚è¿™ä¸‹æˆ‘ä»¬çŸ¥é“äº†æ··ç¼–pythonæ”¹wafé…ç½®å°±å¯ä»¥äº†ã€‚")]),t._v(" "),s("p",[t._v("ç»è¿‡å°è¯•ï¼Œå¯¹äºns3çš„å…·ä½“åšæ³•æ˜¯æ‰“å¼€ns3ä¸»ç›®å½•ä¸‹çš„"),s("code",[t._v("wscript")]),t._v("ï¼Œæœç´¢ä¸€ä¸‹"),s("code",[t._v("options")]),t._v("å‡½æ•°åœ¨å“ªé‡Œï¼Œç„¶ååšå¦‚ä¸‹æ”¹åŠ¨ã€‚")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä¿®æ”¹åŸæ¥çš„optionå‡½æ•°ï¼ŒåŠ è½½pythonè§£é‡Šå™¨")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# options provided by the modules")]),t._v("\n    opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'compiler_c'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'compiler_cxx'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cflags'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gnu_dirs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'python'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# other commands")]),t._v("\n")])])]),s("p",[s("code",[t._v("configure")]),t._v("å‡½æ•°ä¼¼ä¹æ˜¯å¯æ”¹å¯ä¸æ”¹çš„ï¼Œæ¯•ç«Ÿæ˜¯è‡ªå·±çš„æœºå­ï¼Œé»˜è®¤æ²¡é—®é¢˜ï¼Œä¸æ£€æŸ¥ç¯å¢ƒä¹Ÿè¡Œ~")]),t._v(" "),s("p",[t._v("é‡è¦çš„æ˜¯åˆ›å»ºç¨‹åºæ—¶çš„"),s("code",[t._v("features")]),t._v("å‚æ•°ã€‚å› ä¸ºä¾èµ–å¤æ‚ï¼Œns3çš„wscriptå†™æ³•ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼Œå’Œä¸Šé¢ç®€å•çš„wafç¤ºä¾‹è„šæœ¬ä¸åŒï¼Œns3çš„wscriptä¸­ä¸ºæ¯ä¸ªç¨‹åºåˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ†åˆ«è®¾ç½®å„ç§é€‰é¡¹ï¼Œç„¶åä¸ºæ¯ä¸ªç¨‹åºæ·»åŠ ä¾èµ–é¡¹ã€‚è¿™é‡Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°"),s("code",[t._v("create_ns3_program")]),t._v("å‡½æ•°çš„å®šä¹‰ï¼Œç„¶ååšå¦‚ä¸‹ä¿®æ”¹")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åœ¨featureså‚æ•°åé¢æ·»åŠ ä¸€ä¸ªpyembedå°±è¡Œäº†")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create_ns3_program")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bld"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dependencies"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'core'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    program "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bld"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("features"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cxx cxxprogram pyembed'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# wafå¯ä»¥é€šè¿‡ç©ºæ ¼åˆ†éš”é€‰é¡¹")]),t._v("\n    program"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("is_ns3_program "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n    program"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name\n")])])]),s("p",[t._v("è¿™æ ·åšå…¶å®æŒºç²—æš´çš„ï¼Œå…¶ä»–ä¸€äº›æ²¡æœ‰ç”¨pythonçš„cppä»£ç ä¹Ÿä¼šè¢«æ·»åŠ è¿™é¡¹featureï¼Œå¯èƒ½æ›´å¥½çš„åšæ³•æ˜¯å•ç‹¬åœ¨"),s("code",[t._v("scratch")]),t._v("ä¸‹å†™wscriptï¼Œä½†æ˜¯æˆ‘ä¸ä¼šğŸ’”ã€‚")]),t._v(" "),s("p",[t._v("å¦å¤–å› ä¸ºä¼šæœ‰"),s("code",[t._v("__pycache__")]),t._v("ç”Ÿæˆï¼Œæœ€å¥½å†åœ¨ä¸Šé¢çš„wscriptä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œåœ¨ç¼–è¯‘æ—¶è·³è¿‡cacheï¼Œå¦åˆ™è¦æ¯æ¬¡æ¸…ç†æ‰cacheå†ç¼–è¯‘ã€‚")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add_scratch_programs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bld"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isdir"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scratch"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" filename "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__pycache__"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("continue")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),s("p",[t._v("è¿˜æœ‰éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¦‚æœåœ¨cppä¸­å¯¼å…¥äº†è‡ªå·±çš„pythonåŒ…ï¼Œè¦æ³¨æ„ä¸‹åŒ…çš„è·¯å¾„ï¼Œå¦åˆ™ä¼šæ‰¾ä¸åˆ°ã€‚å› ä¸ºns3çš„è„šæœ¬è¿è¡Œæ—¶å€™çš„è·¯å¾„æ˜¯åœ¨æ ¹ç›®å½•ã€‚å¯ä»¥æŠŠåŒ…copyåˆ°ns3çš„æ ¹ç›®å½•ï¼Œæˆ–è€…åœ¨ç”¨"),s("code",[t._v("PyRun_SimpleString (\"sys.path.append('./where you place package')\");")]),t._v("åŠ ä¸ªè·¯å¾„ã€‚")]),t._v(" "),s("p",[t._v("æ”¹å®Œä¹‹åï¼Œä¸‡å¹¸ï¼Œä»£ç èƒ½è·‘èµ·æ¥äº†~")]),t._v(" "),s("p",[t._v("ä½“ä¼šå°±æ˜¯â€œåªè¦æˆ‘ä»¬ä¸åœä¸‹è„šæ­¥ï¼Œé“è·¯å°±ä¼šä¸æ–­å»¶ä¼¸â€ã€‚")]),t._v(" "),s("p",[t._v("â–n"),s("br"),t._v("\nâ–ˆâ–ã€€ï½¤âº"),s("br"),t._v("\nâ–ˆâ– âº°Ê·Ê·ï½¨"),s("br"),t._v("\nâ–ˆâ—£â–„â–ˆâ–ˆâ—£"),s("br"),t._v("\nâ—¥â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹"),s("br"),t._v("\nã€€â—¥â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–"),s("br"),t._v("\nã€€ã€€â–ˆâ–ˆâ–ˆâ–‰ â–ˆâ–"),s("br"),t._v("\nã€€â—¢â–ˆâ–ˆâ–ˆâ–ˆâ—£âŒ â‚˜â„©"),s("br"),t._v("\nã€€ã€€â–ˆâ–ˆâ—¥â–ˆâ—£\\â‰«"),s("br"),t._v("\nã€€ã€€â–ˆâ–ˆã€€â—¥â–ˆâ—£"),s("br"),t._v("\nã€€ã€€â–ˆâ–‰ã€€ã€€â–ˆâ–Š"),s("br"),t._v("\nã€€ã€€â–ˆâ–Šã€€ã€€â–ˆâ–Š"),s("br"),t._v("\nã€€ã€€â–ˆâ–Šã€€ã€€â–ˆâ–‹"),s("br"),t._v("\nã€€ã€€ â–ˆâ–ã€€ã€€â–ˆâ–™"),s("br"),t._v("\nã€€ã€€ â–ˆ")]),t._v(" "),s("h3",{attrs:{id:"è¡¥å……-ns3æ–‡æ¡£ä¸­ç›¸å…³å†…å®¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è¡¥å……-ns3æ–‡æ¡£ä¸­ç›¸å…³å†…å®¹"}},[t._v("#")]),t._v(" è¡¥å……ï¼šns3æ–‡æ¡£ä¸­ç›¸å…³å†…å®¹")]),t._v(" "),s("p",[t._v("äº‹å®ä¸Šï¼Œå¯¹äºåœ¨ç¼–è¯‘æ—¶æ·»åŠ åˆ«çš„ä¾èµ–ns3æ–‡æ¡£ä¸­æœ‰"),s("a",{attrs:{href:"https://www.nsnam.org/wiki/HOWTO_use_ns-3_with_other_libraries",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç›¸å…³æè¿°"),s("OutboundLink")],1),t._v("ï¼ˆå½“ç„¶å»è¯»ä¸»ç›®å½•ä¸‹çš„"),s("code",[t._v("wscript")]),t._v("ä¹Ÿå¯ä»¥å‘ç°ï¼Œå¯ä»¥è¯•ç€åœ¨"),s("code",[t._v("wscript")]),t._v("ä¸­æœç´¢"),s("code",[t._v("CXXFLAGS")]),t._v("ï¼‰ï¼Œå¯ä»¥ç”¨"),s("code",[t._v("CCFLAGS_EXTRA")]),t._v("è¿™äº›é€‰é¡¹ä¸ºç¼–è¯‘å™¨æ·»åŠ å‚æ•°æˆ–è€…åœ¨"),s("code",[t._v("wscript")]),t._v("é‡Œé¢æ”¹ï¼ŒåŸå› æ˜¯"),s("code",[t._v("wscript")]),t._v("ä¸­è¿™æ ·å®šä¹‰è¿‡äº†")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# append user defined flags after all our ones")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("confvar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" envvar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CCFLAGS'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CCFLAGS_EXTRA'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CXXFLAGS'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CXXFLAGS_EXTRA'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'LINKFLAGS'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'LINKFLAGS_EXTRA'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'LINKFLAGS'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'LDFLAGS_EXTRA'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n")])])]),s("p",[t._v("äºæ˜¯"),s("a",{attrs:{href:"https://stackoverflow.com/questions/11876088/how-to-build-ns-3-to-use-c0x-c11-libraries",target:"_blank",rel:"noopener noreferrer"}},[t._v("stackoverflow"),s("OutboundLink")],1),t._v("ä¸Šæœ‰äººæåˆ°å¦‚æœæ˜¯ä¸ºç¼–è¯‘å™¨æ·»åŠ c++11é€‰é¡¹å¯ä»¥è¿™ä¹ˆåš")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CXXFLAGS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-std=c++0x"')]),t._v(" ./waf build\n")])])]),s("p",[t._v("ä½†æ˜¯æˆ‘è¯•è¿‡è¿™ç±»æ–¹æ³•ï¼Œå¤±è´¥äº†ï¼ŒåŸå› æ˜¯ç”¨äº†"),s("code",[t._v("CXXFLAGS")]),t._v("ï¼Œ"),s("code",[t._v("CXXDEFINES")]),t._v("ï¼Œ"),s("code",[t._v("LINKFLAGS")]),t._v("è¿™äº›å‚æ•°å¯¹"),s("code",[t._v("python3-config --cflags")]),t._v("ï¼Œ"),s("code",[t._v("python3-config --ldflags")]),t._v(" å’Œ"),s("code",[t._v("-fPIC")]),t._v("éƒ½ä¸åˆé€‚= =æˆ‘ä¸çŸ¥é“å’‹ç”¨è¿™ç§æ–¹æ³•è®¾ç½®äº†ã€‚")]),t._v(" "),s("h2",{attrs:{id:"ä¸€ä¸ªå¾ˆæœ‰è¶£çš„repo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ä¸ªå¾ˆæœ‰è¶£çš„repo"}},[t._v("#")]),t._v(" ä¸€ä¸ªå¾ˆæœ‰è¶£çš„repo")]),t._v(" "),s("p",[t._v("ä¹‹å‰æ‰“ç®—ç”¨pythonçš„binding apiï¼Œåˆšå¥½å‘ç°äº†è¿™ä¸ªrepoï¼š"),s("a",{attrs:{href:"https://github.com/tkn-tub/ns3-gym",target:"_blank",rel:"noopener noreferrer"}},[t._v("ns3-gym"),s("OutboundLink")],1),t._v(" ã€‚")]),t._v(" "),s("p",[t._v("ä½†æ˜¯æŠŠè¿™ä¸ªrepo cloneä¸‹æ¥åï¼Œå…ˆå»ç¼–è¯‘ns3çš„éƒ¨åˆ†ï¼Œå†æŒ‰READMEä¸­"),s("code",[t._v("pip3 install ./src/opengym/model/ns3gym")]),t._v("å®‰pythonçš„apiï¼Œä¸æ˜¯åƒå…¶ä»–æ¨¡å—é‚£æ ·ç”¨pybindgenè‡ªåŠ¨ç”Ÿæˆçš„apiã€‚")]),t._v(" "),s("p",[t._v("ä½†æ˜¯å¾ˆå¯æƒœæ²¡ç”¨buildæˆåŠŸï¼Œå…·ä½“æƒ…å†µè®°å½•åœ¨è¯¥"),s("a",{attrs:{href:"https://github.com/tkn-tub/ns3-gym/issues/32",target:"_blank",rel:"noopener noreferrer"}},[t._v("issue"),s("OutboundLink")],1),t._v("ã€‚é—®é¢˜ä¸»è¦å‡ºåœ¨protobufå’Œzmqä¸Šã€‚protobufä½œè€…ç”¨äº†ä¸€ä¸ªæ¯”è¾ƒæ—§çš„ç‰ˆæœ¬ï¼Œä»PPAæ‹‰å–åå´æ£€æµ‹ä¸åˆ°ï¼Œåæ¥å‘ç°æ˜¯ç™»å½•ç”¨æˆ·çš„ç¯å¢ƒå˜é‡æ²¡åŠ "),s("code",[t._v("/usr/bin")]),t._v("ï¼Œè¿™ä¸ªä¸»è¦æ˜¯ç”¨æ¥ç¼–è¯‘"),s("code",[t._v("src/opengym/model/messages.proto")]),t._v("å’Œæä¾›é“¾æ¥åº“çš„ï¼Œç¼–è¯‘æ–¹æ³•æ˜¯åœ¨"),s("code",[t._v("src/opengym/model")]),t._v("ä¸‹è°ƒç”¨"),s("code",[t._v("protoc ./messages.proto --cpp_out=./")]),t._v("ã€‚è€Œä¸”è¿™é‡Œå¦‚æœanacondaç¯å¢ƒä¸­å®‰äº†pythonç‰ˆçš„protobufï¼ŒåŒæ ·éœ€è¦å…³æ‰anacondaçš„ç¯å¢ƒï¼Œç”¨"),s("code",[t._v("which protoc")]),t._v("çœ‹ä¸€ä¸‹å§ã€‚zmqçš„è¯ï¼Œä½œè€…æåˆ°ç”¨ "),s("strong",[t._v("libzmq5-dev")]),t._v("ï¼Œä½†æ˜¯ubuntu16.04ä¸Šåªèƒ½æ‰¾åˆ° "),s("strong",[t._v("libzmq3-dev")]),t._v("ã€‚ä¸è¿‡ä¼¼ä¹æ˜¯æ²¡æœ‰ä»€ä¹ˆå…¼å®¹æ€§é—®é¢˜çš„ï¼Œæ¯•ç«Ÿæœ€åå¯ä»¥è·‘èµ·æ¥ã€‚zmqè¿™é‡Œå‡ºé—®é¢˜çš„åŸå› æ˜¯ä½œè€…æ¥å—äº†ä¸€ä¸ªprï¼Œæ”¹äº†apiçš„è°ƒç”¨æ–¹å¼ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ç‰ˆæœ¬é‡ŒæŸäº›å‚æ•°ä¼¼ä¹è¿˜æ˜¯optionalçš„ã€‚ä¸å†™å¹³å°ã€ç‰ˆæœ¬ä¹±æprå®³äººä¸æµ…= =")]),t._v(" "),s("h2",{attrs:{id:"tips"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tips"}},[t._v("#")]),t._v(" TIPS")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("æ€»æ˜¯è€ƒè™‘å»ç”¨Helper")]),t._v(" "),s("p",[t._v("ns3ä¸­çš„å¾ˆå¤šç±»éƒ½æœ‰helperç±»ï¼Œå°è¯•ä½¿ç”¨å®ƒä»¬~")])]),t._v(" "),s("li",[s("p",[t._v("ç›´æ¥ç”¨å®˜æ–¹çš„ShowProgressç»‘å®šåˆ°std::coutä¸Šä¼šæœ‰é—®é¢˜")])]),t._v(" "),s("li",[s("p",[t._v("Scheduleç”¨æ¥å®‰æ’å‡½æ•°çš„æ‰§è¡Œæ—¶ï¼Œåªéœ€è¦æŒ‡å®šè¿è¡Œæ—¶é—´å¹¶å¼•ç”¨å‡½æ•°çš„æŒ‡é’ˆï¼Œå¦‚"),s("code",[t._v("Simulator::Schedule (Seconds (1), &FunctionName)")]),t._v("ï¼›ç”¨æ¥å®‰æ’æŸä¸ªç±»çš„æ–¹æ³•çš„æ‰§è¡Œæ—¶ï¼Œè¦å†™å‡ºæ‰§è¡Œè¯¥æ–¹æ³•çš„å¯¹è±¡çš„æŒ‡é’ˆï¼Œå¦‚å¦‚"),s("code",[t._v("Simulator::Schedule (Seconds (1), &ClassName::FunctionName,ObjectOfTheClass)")]),t._v("ã€‚")])])]),t._v(" "),s("p",[s("RouterLink",{attrs:{to:"/zh/blogs/"}},[t._v("è¿”å›")])],1),t._v(" "),s("Comment",{attrs:{lang:"zh-CN"}})],1)}),[],!1,null,null,null);a.default=e.exports}}]);