(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{490:function(t,a,s){"use strict";s.r(a);var n=s(12),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#rustä¸­å®çš„åˆ†ç±»"}},[t._v("Rustä¸­å®çš„åˆ†ç±»")])]),s("li",[s("a",{attrs:{href:"#å£°æ˜å¼å®"}},[t._v("å£°æ˜å¼å®")])]),s("li",[s("a",{attrs:{href:"#è¿‡ç¨‹å¼å®"}},[t._v("è¿‡ç¨‹å¼å®")]),s("ul",[s("li",[s("a",{attrs:{href:"#custom-derive-å®"}},[t._v("Custom Derive å®")])]),s("li",[s("a",{attrs:{href:"#attribute-like-å®"}},[t._v("Attribute-Like å®")])]),s("li",[s("a",{attrs:{href:"#function-like-å®"}},[t._v("Function-Like å®")])])])]),s("li",[s("a",{attrs:{href:"#å¥½ç”¨çš„åº“"}},[t._v("å¥½ç”¨çš„åº“")])]),s("li",[s("a",{attrs:{href:"#macrokata"}},[t._v("MacroKata")])]),s("li",[s("a",{attrs:{href:"#æ”¶å½•æœ‰è¶£çš„å®æ ·ä¾‹"}},[t._v("æ”¶å½•æœ‰è¶£çš„å®æ ·ä¾‹")]),s("ul",[s("li",[s("a",{attrs:{href:"#ä½ è¿™å†™çš„å•¥å•Š"}},[t._v("ä½ è¿™å†™çš„å•¥å•Š")])]),s("li",[s("a",{attrs:{href:"#è¿˜å¾—å­¦ä¹ ä¸€ä¸ª"}},[t._v("è¿˜å¾—å­¦ä¹ ä¸€ä¸ª")])])])]),s("li",[s("a",{attrs:{href:"#references"}},[t._v("References")])])])]),s("p"),t._v(" "),s("h1",{attrs:{id:"rustå®å­¦ä¹ ç¬”è®°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rustå®å­¦ä¹ ç¬”è®°"}},[t._v("#")]),t._v(" Rustå®å­¦ä¹ ç¬”è®°")]),t._v(" "),s("p",[t._v("å‰é¢çš„éƒ¨åˆ†åŸºæœ¬æ˜¯ Rust è¯­è¨€æ‰‹å†Œç¿»è¯‘ã€‚")]),t._v(" "),s("p",[t._v("Rust ä¸­çš„å®ç›¸è¾ƒC++æ›´ä¸ºå¼ºå¤§ã€‚C++ ä¸­çš„å®åœ¨é¢„å¤„ç†é˜¶æ®µå¯ä»¥å±•å¼€ä¸ºæ–‡æœ¬ï¼ŒRust çš„å®åˆ™æ˜¯å¯¹è¯­æ³•çš„æ‰©å±•ï¼Œæ˜¯åœ¨æ„å»ºè¯­æ³•æ ‘æ—¶ï¼Œæ‰å±•å¼€çš„å®ã€‚")]),t._v(" "),s("h2",{attrs:{id:"rustä¸­å®çš„åˆ†ç±»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rustä¸­å®çš„åˆ†ç±»"}},[t._v("#")]),t._v(" Rustä¸­å®çš„åˆ†ç±»")]),t._v(" "),s("p",[t._v("Rust ä¸­å®å¯ä»¥åˆ†ä¸ºå¾ˆå¤šç±»ï¼ŒåŒ…æ‹¬é€šè¿‡ macro_rules å®šä¹‰çš„"),s("strong",[t._v("å£°æ˜å¼å®")]),t._v("å’Œä¸‰ç§"),s("strong",[t._v("è¿‡ç¨‹å¼å®")])]),t._v(" "),s("ul",[s("li",[t._v("custom derive å¯æ¨å¯¼å®ï¼Œå€ŸåŠ© "),s("code",[t._v("#[derive]")]),t._v(" å±æ€§æ ‡ç­¾ï¼Œå®ƒå¯ä»¥ç”¨åœ¨ struct å’Œ enum ä¸Š")]),t._v(" "),s("li",[t._v("attribute-like æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼Œå¯ä»¥ä½œç”¨äºä»»ä½•åœ°æ–¹")]),t._v(" "),s("li",[t._v("function-like çœ‹ä¸Šå»åƒå‡½æ•°ï¼Œä½†æ˜¯ä½œç”¨åœ¨ token ä¸Šï¼Œå³æŠŠtokenä½œä¸ºå‡½æ•°å‚æ•°")])]),t._v(" "),s("p",[t._v("æ‰€ä»¥ä¸ºä»€ä¹ˆéœ€è¦å®ï¼Ÿ")]),t._v(" "),s("p",[t._v("ä¸ºäº†å·æ‡’ã€ä¸ºäº†è®©ä»£ç æ›´ç®€æ´ã€‚ä½¿ç”¨å®å¯ä»¥å¿«é€Ÿç”Ÿæˆå¤§é‡ä»£ç ï¼Œé¿å…é‡å¤åŠ³åŠ¨ã€‚Rust å®æ‰©å±•äº†è¯­æ³•ï¼Œä½ æ˜¯ä¸ä¼šæƒ³è¦æ¯æ¬¡éƒ½è€è€å®å®åœ°å†™ç¹å¤çš„ä»£ç çš„ï¼Œæ‰€ä»¥å­¦ä¸€ç‚¹é­”æ³•ï¼")]),t._v(" "),s("p",[t._v("ä¸ºä»€ä¹ˆä¸ç”¨å‡½æ•°æˆ–è€…æ¨¡æ¿ï¼Ÿ")]),t._v(" "),s("ul",[s("li",[t._v("Rust çš„å‡½æ•°å¿…é¡»é™å®šå¥½å‚æ•°ç±»å‹å’Œå‚æ•°ä¸ªæ•°ï¼Œè€Œä¸”ä»–å¹¶æ²¡æœ‰æä¾›å˜é•¿æ¨¡æ¿å‚æ•°ï¼Œæ‰€ä»¥å˜›ï¼Œå“ˆå“ˆã€‚äº‹å®ä¸Šæœ‰ä¸å°‘åº“ä¸ºäº†åº”å¯¹æœªçŸ¥ä¸ªæ•°å‚æ•°çš„æƒ…å†µï¼Œæ‰‹å†™äº†ä¸åŒä¸ªæ•°å‚æ•°çš„å‡½æ•°ï¼Œè€Œä¸”å¾ˆè›‹ç–¼çš„æ˜¯ Rust ä¹Ÿä¸å…è®¸åŒåå‡½æ•°çš„é‡è½½ ğŸ˜ƒ å½“ç„¶æˆ‘è¿˜æ˜¯æœ€å–œæ¬¢Rustäº†ã€‚")]),t._v(" "),s("li",[t._v("å®åœ¨ç¼–è¯‘æœŸå±•å¼€ï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ¥ç»™ struct æ·»åŠ  traitï¼Œè¿™å¿…é¡»åœ¨è¿è¡Œå‰å®Œæˆï¼Œè€Œå‡½æ•°éœ€è¦ç­‰åˆ°è¿è¡Œæ—¶æ‰ä¼šæ‰§è¡Œã€‚")])]),t._v(" "),s("p",[t._v("ä½†æ˜¯åå¤„ï¼ˆå¦‚æœç®—çš„è¯ï¼‰å°±æ˜¯å®æ›´éš¾ä¹¦å†™ã€ç†è§£å’Œç»´æŠ¤ï¼›åŒæ—¶å‡½æ•°å¯ä»¥å®šä¹‰ã€å¼•å…¥åœ¨æ–‡ä»¶é‡Œçš„ä»»ä½•åœ°æ–¹ï¼Œè€Œåœ¨ä½¿ç”¨å®ä¹‹å‰å¿…é¡»ç¡®ä¿ä»–è¢«å®šä¹‰ã€å¼•å…¥åˆ°ä¸Šæ–¹çš„ä»£ç ä¸­äº†ã€‚")]),t._v(" "),s("p",[t._v("ä¸‹é¢å¼€å§‹è®°å½•å®çš„å†™æ³•ï¼")]),t._v(" "),s("h2",{attrs:{id:"å£°æ˜å¼å®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å£°æ˜å¼å®"}},[t._v("#")]),t._v(" å£°æ˜å¼å®")]),t._v(" "),s("p",[t._v("åœ¨Rustä¸­ï¼Œåº”ç”¨æœ€å¹¿æ³›çš„ä¸€ç§å®å°±æ˜¯å£°æ˜å¼å®ï¼Œç±»ä¼¼äºæ¨¡å¼åŒ¹é…çš„å†™æ³•ï¼Œå°†ä¼ å…¥çš„ Rust ä»£ç ä¸é¢„å…ˆæŒ‡å®šçš„æ¨¡å¼è¿›è¡Œæ¯”è¾ƒï¼Œåœ¨ä¸åŒæ¨¡å¼ä¸‹ç”Ÿæˆä¸åŒçš„ä»£ç ã€‚")]),t._v(" "),s("p",[t._v("ä½¿ç”¨"),s("code",[t._v("macro_rules!")]),t._v("æ¥å®šä¹‰ä¸€ä¸ªå£°æ˜å¼å®ã€‚")]),t._v(" "),s("p",[t._v("æœ€åŸºç¡€çš„ä¾‹å­æ˜¯å¾ˆå¸¸è§çš„"),s("code",[t._v("vec!")]),t._v("ï¼š")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" v"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vec")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("u32")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("vec!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("ç®€åŒ–ç‰ˆçš„å®šä¹‰æ˜¯ï¼ˆå®é™…çš„ç‰ˆæœ¬æœ‰å…¶ä»–åˆ†æ”¯ï¼Œè€Œä¸”è¯¥åˆ†æ”¯ä¸‹è¦é¢„å…ˆåˆ†é…å†…å­˜é˜²æ­¢åœ¨pushæ—¶å€™å†åŠ¨æ€åˆ†åˆ’ï¼‰")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[macro_export]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("macro_rules!")]),t._v(" vec "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$x")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("expr")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mut")]),t._v(" temp_vec "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("new")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                temp_vec"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$x")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\n            temp_vec\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("::: "),s("code",[t._v("$( $x:expr ),*")]),t._v("å’Œ"),s("code",[t._v("$( $x:expr,)*")]),t._v("çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),s("p",[t._v("å‰è€…ï¼Œæœ€åçš„"),s("code",[t._v(",")]),t._v("æ˜¯"),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/macros-by-example.html",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[t._v("MacroRepSep")]),s("OutboundLink")],1),t._v("ï¼Œæ„å‘³ç€ "),s("code",[t._v("1,2,3")]),t._v("æ˜¯ä¸€ä¸ªåˆæ³•çš„åºåˆ—ã€‚")]),t._v(" "),s("p",[t._v("åè€…ï¼Œæœ€åçš„"),s("code",[t._v(",")]),t._v("æ˜¯"),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/macros-by-example.html",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[t._v("MacroMatch")]),s("OutboundLink")],1),t._v(" çš„ä¸€éƒ¨åˆ†ï¼Œæ„å‘³ç€ "),s("code",[t._v("1,2,3,")]),t._v("æ‰æ˜¯ä¸€ä¸ªåˆæ³•çš„åºåˆ—ã€‚")]),t._v(" "),s("p",[t._v(":::")]),t._v(" "),s("p",[s("code",[t._v("#[macro_export]")]),t._v("æ ‡ç­¾æ˜¯ç”¨æ¥å£°æ˜ï¼šåªè¦ use äº†è¿™ä¸ªcrateï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥å®ã€‚åŒæ—¶åŒ…å«è¢« export å‡ºçš„å®çš„æ¨¡å—ï¼Œåœ¨å£°æ˜æ—¶å¿…é¡»æ”¾åœ¨å‰é¢ï¼Œå¦åˆ™é å‰çš„æ¨¡å—é‡Œæ‰¾ä¸åˆ°è¿™äº›å®ã€‚")]),t._v(" "),s("p",[t._v("æŒ‰ç…§å®˜æ–¹æ–‡æ¡£çš„è¯´æ³•ï¼Œ"),s("code",[t._v("macro_rules!")]),t._v("ç›®å‰æœ‰ä¸€äº›è®¾è®¡ä¸Šçš„é—®é¢˜ï¼Œæ—¥åå°†æ¨å‡ºæ–°çš„æœºåˆ¶æ¥å–ä»£ä»–ã€‚ä½†æ˜¯ä»–ä¾ç„¶æ˜¯ä¸€ä¸ªå¾ˆæœ‰æ•ˆçš„è¯­æ³•æ‰©å±•æ–¹æ³•ã€‚")]),t._v(" "),s("p",[t._v("è¿™é‡Œä¸€ä¸ªæ³¨æ„ç‚¹æ˜¯ï¼šå¦‚æœæƒ³è¦åˆ›å»ºä¸´æ—¶å˜é‡ï¼Œé‚£ä¹ˆå¿…é¡»è¦åƒä¸Šé¢è¿™ä¸ªä¾‹å­è¿™æ ·ï¼Œæ”¾åœ¨æŸä¸ªå—çº§ä½œç”¨åŸŸå†…ï¼Œä»¥ä¾¿è‡ªåŠ¨æ¸…ç†æ‰ï¼Œå¦åˆ™ä¼šè®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„è¡Œä¸ºã€‚")]),t._v(" "),s("p",[t._v(":::å£°æ˜å®ä¸­æ”¯æŒçš„è¯­æ³•æ ‘å…ƒå˜é‡ç±»å‹")]),t._v(" "),s("p",[t._v("å‡ºè‡ª "),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/macros-by-example.html#metavariables",target:"_blank",rel:"noopener noreferrer"}},[t._v("Macros By Example - The Rust Reference"),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("p",[t._v("å›é¡¾ç¼–è¯‘åŸç† ğŸ˜ƒ")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("item")]),t._v(": éšä¾¿ä¸€ä¸ªä»€ä¹ˆ "),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/items.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä¸œè¥¿"),s("OutboundLink")],1),t._v("ï¼Œå‡†ç¡®å®šä¹‰å‚è€ƒä¸Šè¿°æ‰‹å†Œä¸­")]),t._v(" "),s("li",[s("code",[t._v("block")]),t._v(": ä¸€ä¸ª "),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/expressions/block-expr.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("å—è¡¨è¾¾å¼"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("code",[t._v("stmt")]),t._v(": ä¸€ä¸ª "),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/statements.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¯­å¥"),s("OutboundLink")],1),t._v("ï¼Œä½†æ˜¯ä¸åŒ…å«ç»“å°¾çš„åˆ†å·ï¼Œé™¤äº†å¿…é¡»æœ‰åˆ†å·çš„ item statements")]),t._v(" "),s("li",[s("code",[t._v("pat_param")]),t._v(": ä¸€ä¸ª "),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/patterns.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("åŒ¹é…æ¨¡å¼"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("code",[t._v("pat")]),t._v(": ç­‰ä»·äº "),s("code",[t._v("pat_param")])]),t._v(" "),s("li",[s("code",[t._v("expr")]),t._v(": ä¸€ä¸ª "),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/expressions.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¡¨è¾¾å¼"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("code",[t._v("ty")]),t._v(": ä¸€ç§ "),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/types.html#type-expressions",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç±»å‹"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("code",[t._v("ident")]),t._v(": ä¸€ä¸ª "),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/identifiers.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ ‡è¯†ç¬¦æˆ–å…³é”®å­—"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("code",[t._v("path")]),t._v(": ä¸€æ¡ "),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/paths.html#paths-in-types",target:"_blank",rel:"noopener noreferrer"}},[t._v("TypePath"),s("OutboundLink")],1),t._v(" å½¢å¼çš„è·¯å¾„")]),t._v(" "),s("li",[s("code",[t._v("tt")]),t._v(": "),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/macros.html#macro-invocation",target:"_blank",rel:"noopener noreferrer"}},[t._v("Token æ ‘"),s("OutboundLink")],1),t._v(" ï¼ˆä¸€ä¸ªç‹¬ç«‹çš„ "),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/tokens.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("token"),s("OutboundLink")],1),t._v(" æˆ–ä¸€ç³»åˆ—åœ¨åŒ¹é…å®Œæ•´çš„å®šç•Œç¬¦ "),s("code",[t._v("()")]),t._v("ã€"),s("code",[t._v("[]")]),t._v(" æˆ– "),s("code",[t._v("{}")]),t._v(" ä¸­çš„ tokenï¼‰")]),t._v(" "),s("li",[s("code",[t._v("meta")]),t._v(":  "),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/attributes.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ ‡ç­¾"),s("OutboundLink")],1),t._v(" ä¸­çš„å†…å®¹")]),t._v(" "),s("li",[s("code",[t._v("lifetime")]),t._v(":  ä¸€ä¸ª "),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/tokens.html#lifetimes-and-loop-labels",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç”Ÿå‘½å‘¨æœŸæ ‡è¯†"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("code",[t._v("vis")]),t._v(": å¯èƒ½ä¸å­˜åœ¨çš„ "),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/visibility-and-privacy.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¯è§æ€§æ ‡è®°"),s("OutboundLink")],1),t._v("ï¼ˆå¹¶ä¸æ˜¯æ‰€æœ‰å‡½æ•°ã€ç±»å‹éƒ½ä¼šä½¿ç”¨ "),s("code",[t._v("pub")]),t._v(" è¿›è¡Œæ ‡è®°ï¼Œæ‰€ä»¥å¯èƒ½æ˜¯ä¸å­˜åœ¨çš„ï¼‰")]),t._v(" "),s("li",[s("code",[t._v("literal")]),t._v(": åŒ¹é… "),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/expressions/literal-expr.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ–‡æœ¬è¡¨è¾¾å¼"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v(":::")]),t._v(" "),s("h2",{attrs:{id:"è¿‡ç¨‹å¼å®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è¿‡ç¨‹å¼å®"}},[t._v("#")]),t._v(" è¿‡ç¨‹å¼å®")]),t._v(" "),s("p",[t._v("ç¬¬äºŒç±»æ˜¯è¿‡ç¨‹å¼çš„å®ï¼Œå®ƒæ›´åƒå‡½æ•°ï¼Œä»–æ¥å—ä¸€äº›ä»£ç ä½œä¸ºå‚æ•°è¾“å…¥ï¼Œç„¶åå¯¹ä»–ä»¬è¿›è¡ŒåŠ å·¥ï¼Œç”Ÿæˆæ–°çš„ä»£ç ï¼Œä»–ä¸æ˜¯åœ¨åšå£°æ˜å¼å®é‚£æ ·çš„æ¨¡å¼åŒ¹é…ã€‚ä¸‰ç§è¿‡ç¨‹å¼å®éƒ½æ˜¯è¿™ç§æ€è·¯ã€‚")]),t._v(" "),s("p",[t._v("ä¸èƒ½åœ¨åŸå§‹çš„crateä¸­ç›´æ¥å†™è¿‡ç¨‹å¼å®ï¼Œéœ€è¦æŠŠè¿‡ç¨‹å¼å®æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„crateä¸­ï¼ˆä»¥åå¯èƒ½ä¼šæ¶ˆé™¤è¿™ç§çº¦å®šï¼‰ã€‚å®šä¹‰è¿‡ç¨‹å¼å®çš„æ–¹æ³•å¦‚ä¸‹ï¼š")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" proc_macro"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[some_attribute]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("some_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStream")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("éœ€è¦å¼•å…¥"),s("code",[t._v("proc_macro")]),t._v(" è¿™ä¸ª crateï¼Œç„¶åæ ‡ç­¾æ˜¯ç”¨æ¥å£°æ˜å®ƒæ˜¯å“ªç§è¿‡ç¨‹å¼å®çš„ï¼Œæ¥ç€å°±æ˜¯ä¸€ä¸ªå‡½æ•°å®šä¹‰ï¼Œå‡½æ•°æ¥å— "),s("code",[t._v("TokenStream")]),t._v("ï¼Œè¿”å› "),s("code",[t._v("TokenStream")]),t._v("ã€‚"),s("code",[t._v("TokenStream")]),t._v(" ç±»å‹å°±å®šä¹‰åœ¨ "),s("code",[t._v("proc_macro")]),t._v(" åŒ…ä¸­ï¼Œè¡¨ç¤º token åºåˆ—ã€‚é™¤äº†æ ‡å‡†åº“ä¸­çš„è¿™ä¸ªåŒ…ï¼Œè¿˜å¯ä»¥ä½¿ç”¨"),s("code",[t._v("proc_macro2")]),t._v(" åŒ…ï¼Œä½¿ç”¨ "),s("code",[t._v("proc_macro2::TokenStream::from()")]),t._v(" å’Œ "),s("code",[t._v("proc_macro::TokenStream::from()")]),t._v(" å¯ä»¥å¾ˆä¾¿æ·åœ°åœ¨ä¸¤ä¸ªåŒ…çš„ç±»å‹é—´è¿›è¡Œè½¬æ¢ã€‚ä½¿ç”¨ "),s("code",[t._v("proc_macro2")]),t._v(" çš„å¥½å¤„æ˜¯å¯ä»¥åœ¨è¿‡ç¨‹å®å¤–éƒ¨ä½¿ç”¨ "),s("code",[t._v("proc_macro2")]),t._v(" çš„ç±»å‹ï¼Œç›¸å "),s("code",[t._v("proc_macro")]),t._v(" ä¸­çš„ç±»å‹åªå¯ä»¥åœ¨è¿‡ç¨‹å®çš„ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ã€‚ä¸” "),s("code",[t._v("proc_macro2")]),t._v(" å†™å‡ºçš„å®æ›´å®¹æ˜“ç¼–å†™æµ‹è¯•ä»£ç ã€‚")]),t._v(" "),s("p",[t._v("ä¸‹é¢è¯¦ç»†è¯´æ˜å¦‚ä½•å®šä¹‰ä¸‰ç±»è¿‡ç¨‹å®ã€‚")]),t._v(" "),s("h3",{attrs:{id:"custom-derive-å®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#custom-derive-å®"}},[t._v("#")]),t._v(" Custom Derive å®")]),t._v(" "),s("p",[t._v("åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯å®ç°ä¸‹é¢çš„ä»£ç ï¼Œä½¿ç”¨ç¼–è¯‘å™¨ä¸ºæˆ‘ä»¬ç”Ÿæˆåä¸º "),s("code",[t._v("HelloMacro")]),t._v(" çš„ "),s("code",[t._v("Trait")])]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("hello_macro"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HelloMacro")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("hello_macro_derive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HelloMacro")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[derive(HelloMacro)]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token type-definition class-name"}},[t._v("Pancakes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Pancakes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hello_macro")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("è¯¥ "),s("code",[t._v("Trait")]),t._v(" çš„å®šä¹‰å¦‚ä¸‹ï¼Œç›®çš„æ˜¯æ‰“å°å®ç°è¯¥å®çš„ç±»å‹å")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("trait")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HelloMacro")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("hello_macro")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("ç”±äºè¿‡ç¨‹å®ä¸èƒ½åœ¨åŸ crate ä¸­å®ç°ï¼Œæˆ‘ä»¬éœ€è¦å¦‚ä¸‹åœ¨ "),s("code",[t._v("hello_crate")]),t._v(" çš„ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª "),s("code",[t._v("hello_macro_derive")]),t._v(" crate")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("cargo new hello_macro_derive --lib\n")])])]),s("p",[t._v("åœ¨æ–°çš„ crate å†…ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ "),s("code",[t._v("Cargo.toml")]),t._v(" é…ç½®æ–‡ä»¶ï¼Œ")]),t._v(" "),s("div",{staticClass:"language-toml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-toml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("lib")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("proc-macro")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("dependencies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("syn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("quote")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0"')]),t._v("\n")])])]),s("p",[t._v("åœ¨ "),s("code",[t._v("src/lib.rs")]),t._v(" ä¸­å¯ä»¥ç€æ‰‹å®ç°è¯¥å®ï¼Œå…¶ä¸­ "),s("code",[t._v("syn")]),t._v(" æ˜¯ç”¨æ¥è§£æ rust ä»£ç çš„ï¼Œè€Œquoteåˆ™å¯ä»¥ç”¨å·²æœ‰çš„å˜é‡ç”Ÿæˆä»£ç çš„ "),s("code",[t._v("TokenStream")]),t._v("ï¼Œå¯ä»¥è®¤ä¸º "),s("code",[t._v("quote!")]),t._v(" å®å†…çš„å°±æ˜¯æˆ‘ä»¬æƒ³è¦ç”Ÿæˆçš„ä»£ç ")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extern")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("crate")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token module-declaration namespace"}},[t._v("proc_macro")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("proc_macro"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("quote"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")])]),t._v("quote"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" syn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[proc_macro_derive(HelloMacro)]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("hello_macro_derive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStream")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Construct a representation of Rust code as a syntax tree")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// that we can manipulate")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" ast "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("syn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")])]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unwrap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Build the trait implementation")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("impl_hello_macro")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("ast"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("impl_hello_macro")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ast"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("syn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeriveInput")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStream")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("ast"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ident"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" gen "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("quote!")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("impl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HelloMacro")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" #name "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("hello_macro")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("println!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, Macro! My name is {}!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("stringify!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("#name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    gen"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("into")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("å¦å¤–ï¼Œ"),s("strong",[t._v("Custom Derive å®å¯ä»¥æºå¸¦Attributesï¼Œç§°ä¸º Derive macro helper attributes")]),t._v("ï¼Œå…·ä½“ç¼–å†™æ–¹æ³•å¯ä»¥å‚è€ƒ "),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/procedural-macros.html#derive-macro-helper-attributes",target:"_blank",rel:"noopener noreferrer"}},[t._v("Reference"),s("OutboundLink")],1),t._v("ï¼ˆRust ä¸­å…±æœ‰"),s("a",{attrs:{href:"https://doc.rust-lang.org/reference/attributes.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("å››ç±» Attributes"),s("OutboundLink")],1),t._v("ï¼‰ã€‚å…³äº Derive macro helper attributes è¿™é‡Œæœ‰ä¸€ä¸ªå‘å°±æ˜¯"),s("strong",[t._v("åœ¨ä½¿ç”¨ "),s("code",[t._v("cfg_attr")]),t._v(" æ—¶ï¼Œéœ€è¦æŠŠ Attributes æ”¾åœ¨å®ä¹‹å‰ã€‚")])]),t._v(" "),s("p",[t._v("ä¸¾ä¸ªæ —å­ï¼š")]),t._v(" "),s("p",[t._v("ä½¿ç”¨ kube-rs å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®šä¹‰ CRDï¼ˆCustom Resource Definitionï¼‰ï¼š")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[derive(CustomResource, Clone, Debug, Deserialize, Serialize, JsonSchema)]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[kube(group = "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"clux.dev"')]),t._v(", version = "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"v1"')]),t._v(", kind = "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Foo"')]),t._v(", namespaced)]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token type-definition class-name"}},[t._v("FooSpec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("æˆ‘ç¬¬ä¸€ååº”æ˜¯ "),s("code",[t._v("#[kube]")]),t._v(" æ˜¯ä¸€ä¸ª Attribute-Like å®ï¼Œä½†æ˜¯æŸ¥é˜… kube-rs æ–‡æ¡£æ‰å‘ç°å®ƒå…¶å®æ˜¯ "),s("code",[t._v("CustomResource")]),t._v(" Custom Derive å®çš„ Attributeã€‚è¿™é‡Œæˆ‘ä»¬æƒ³ç”¨ "),s("code",[t._v("cfg_attr")]),t._v(" æ¥æ§åˆ¶æ˜¯å¦å»åš deriveï¼Œä¸€å¼€å§‹å°±æƒ³å½“ç„¶åœ°è¿™ä¹ˆå†™äº†ï¼š")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[cfg_attr(feature="),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use_kube_rs"')]),t._v(",\n    derive(CustomResource, Clone, Debug, Deserialize, Serialize, JsonSchema),\n    kube(group = "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"clux.dev"')]),t._v(", version = "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"v1"')]),t._v(", kind = "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Foo"')]),t._v(", namespaced)\n)]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token type-definition class-name"}},[t._v("FooSpec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("ç„¶è€Œè¿™æ˜¯é”™è¯¯çš„æ‰“å¼€æ–¹å¼ï¼Œéœ€è¦å†™æˆï¼š")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[cfg_attr(feature="),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use_kube_rs"')]),t._v(",\n    kube(group = "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"clux.dev"')]),t._v(", version = "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"v1"')]),t._v(", kind = "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Foo"')]),t._v(", namespaced),\n    derive(CustomResource, Clone, Debug, Deserialize, Serialize, JsonSchema)\n)]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token type-definition class-name"}},[t._v("FooSpec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Attributes éœ€è¦å†™åœ¨å®çš„ derive å‰é¢ã€‚")]),t._v(" "),s("h3",{attrs:{id:"attribute-like-å®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#attribute-like-å®"}},[t._v("#")]),t._v(" Attribute-Like å®")]),t._v(" "),s("p",[t._v("attribute-like å®å’Œ custom derive å®å¾ˆç›¸ä¼¼ï¼Œåªæ˜¯æ ‡ç­¾å¯ä»¥è‡ªå®šä¹‰ï¼Œæ›´åŠ çµæ´»ï¼Œç”šè‡³å¯ä»¥ä½¿ç”¨åœ¨å‡½æ•°ä¸Šã€‚ä»–çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼Œæ¯”å¦‚å‡è®¾æœ‰ä¸€ä¸ªå®ä¸º "),s("code",[t._v("route")]),t._v(" çš„å®")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[route(GET, "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),t._v(")]")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("index")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("æŒ‰ä¸‹é¢çš„è¯­æ³•å®šä¹‰ "),s("code",[t._v("route")]),t._v(" å®")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[proc_maco_attribute]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("route")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("attr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStream")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("å…¶ä¸­ "),s("code",[t._v("attr")]),t._v(" å‚æ•°æ˜¯ä¸Šé¢çš„ "),s("code",[t._v("Get")]),t._v("ï¼Œ"),s("code",[t._v('"/"')]),t._v(" ï¼›"),s("code",[t._v("item")]),t._v(" å‚æ•°æ˜¯ "),s("code",[t._v("fn index(){}")]),t._v(" ã€‚")]),t._v(" "),s("h3",{attrs:{id:"function-like-å®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#function-like-å®"}},[t._v("#")]),t._v(" Function-Like å®")]),t._v(" "),s("p",[t._v("è¿™ç§å®çœ‹ä¸Šå»å’Œ "),s("code",[t._v("macro_rules!")]),t._v(" æ¯”è¾ƒç±»ä¼¼ï¼Œä½†æ˜¯åœ¨å£°æ˜å¼å®åªèƒ½ç”¨ "),s("code",[t._v("match")]),t._v(" å»åšæ¨¡å¼åŒ¹é…ï¼Œä½†æ˜¯åœ¨è¿™é‡Œå¯ä»¥æœ‰æ›´å¤æ‚çš„è§£ææ–¹å¼ï¼Œæ‰€ä»¥å¯ä»¥å†™å‡ºæ¥")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" sql "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("sql!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SELECT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FROM")]),t._v(" posts "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("WHERE")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("ä¸Šé¢è¿™ä¸ª "),s("code",[t._v("sql")]),t._v(" å®çš„å®šä¹‰æ–¹æ³•å¦‚ä¸‹")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[proc_macro]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("sql")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStream")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"å¥½ç”¨çš„åº“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¥½ç”¨çš„åº“"}},[t._v("#")]),t._v(" å¥½ç”¨çš„åº“")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://doc.rust-lang.org/proc_macro/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("proc_macro"),s("OutboundLink")],1),t._v("ï¼šé»˜è®¤ token æµåº“ï¼Œåªèƒ½åœ¨è¿‡ç¨‹å®ä¸­ä½¿ç”¨ï¼Œç¼–è¯‘å™¨è¦ç”¨å®ƒï¼Œå°†å®ƒä½œä¸ºè¿‡ç¨‹å®çš„è¿”å›å€¼ï¼Œå¤§å¤šæ•°æƒ…å†µæˆ‘ä»¬ä¸éœ€è¦ï¼Œåªéœ€è¦åœ¨å®è¿”å›ç»“æœçš„æ—¶å€™æŠŠ "),s("code",[t._v("proc_macro2::TokenSteam")]),t._v(" çš„æµ "),s("code",[t._v("into()")]),t._v(" åˆ° "),s("code",[t._v("proc_macro::TokenSteam")]),t._v(" å°±è¡Œäº†ã€‚")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://crates.io/crates/proc_macro2",target:"_blank",rel:"noopener noreferrer"}},[t._v("proc_macro2"),s("OutboundLink")],1),t._v("ï¼šæˆ‘ä»¬çœŸæ­£åœ¨ä½¿ç”¨çš„è¿‡ç¨‹å®åº“ï¼Œå¯ä»¥åœ¨è¿‡ç¨‹å®å¤–ä½¿ç”¨ã€‚")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://crates.io/crates/syn",target:"_blank",rel:"noopener noreferrer"}},[t._v("syn"),s("OutboundLink")],1),t._v("ï¼šè¿‡ç¨‹å®å·¦æŠ¤æ³•ï¼Œå¯ä»¥å°† "),s("code",[t._v("TokenStream")]),t._v(" è§£ææˆè¯­æ³•æ ‘ï¼Œæ³¨æ„ä¸¤ä¸ª "),s("code",[t._v("proc_macro")]),t._v(" å’Œ "),s("code",[t._v("proc_macro")]),t._v(" éƒ½æ”¯æŒï¼Œéœ€è¦çœ‹æ–‡æ¡£ææ¸…æ¥šåº“å‡½æ•°åˆ°åº•æ˜¯åœ¨è§£æå“ªä¸ªåº“ä¸­çš„ "),s("code",[t._v("TokenStream")]),t._v("ã€‚")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://crates.io/crates/quote",target:"_blank",rel:"noopener noreferrer"}},[t._v("quote"),s("OutboundLink")],1),t._v("ï¼šè¿‡ç¨‹å®å³æŠ¤æ³•ï¼Œå°†è¯­æ³•æ ‘è§£ææˆ "),s("code",[t._v("TokenStream")]),t._v("ã€‚åªè¦ä¸€ä¸ª "),s("code",[t._v("quote!{}")]),t._v(" å°±å¤Ÿäº†ï¼"),s("code",[t._v("quote!{}")]),t._v(" å®å†…éƒ½æ˜¯å­—é¢é‡ï¼Œå³çº¯çº¯çš„ä»£ç ï¼Œè¦æ›¿æ¢è¿›å»çš„å˜é‡æ˜¯ç”¨çš„ "),s("code",[t._v("#")]),t._v(" ç¬¦å·æ ‡æ³¨ï¼Œä¸ºäº†å’Œå£°æ˜å®ä¸­ä½¿ç”¨çš„ "),s("code",[t._v("$")]),t._v(" ç›¸åŒºåˆ†ï¼ˆä¹Ÿå°±æ„å‘³ç€ç”¨ "),s("code",[t._v("quote")]),t._v(" å†™è¿‡ç¨‹å®çš„æ—¶å€™ï¼Œå¯ä»¥å’Œå£°æ˜å®ç»“åˆ ğŸ¤¤ ï¼‰ã€‚æ¨¡å¼åŒ¹é…æ—¶ç”¨åˆ°çš„è¡¨ç¤ºé‡å¤çš„ç¬¦å·å’Œå£°æ˜å®ä¸­ä¸€æ ·ï¼Œæ˜¯ä½¿ç”¨ "),s("code",[t._v("*")]),t._v("ã€‚")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://crates.io/crates/darling",target:"_blank",rel:"noopener noreferrer"}},[t._v("darling"),s("OutboundLink")],1),t._v(" å¥½ç”¨åˆ°è·º jio jio çš„æ ‡ç­¾å®è§£æåº“ï¼Œè®©äººç›´å‘¼ Darlingï¼")]),t._v(" "),s("h2",{attrs:{id:"macrokata"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#macrokata"}},[t._v("#")]),t._v(" MacroKata")]),t._v(" "),s("p",[t._v("2022å¹´12æœˆæ›´æ–°")]),t._v(" "),s("p",[t._v("çœ‹åˆ°äº†ä¸€ä¸ªå®æ•™ç¨‹é¡¹ç›® "),s("a",{attrs:{href:"https://tfpk.github.io/macrokata/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MacroKata"),s("OutboundLink")],1),t._v("ï¼Œåˆ·äº†ä¸€ä¸‹ï¼Œç›®å‰"),s("strong",[t._v("æ•™ç¨‹ä¸­ä»…åŒ…å«å£°æ˜å¼çš„å®")]),t._v("ï¼Œè¯»åˆ°äº†ä¸€äº›ä¹‹å‰æ²¡æ³¨æ„çš„ç‚¹ã€‚")]),t._v(" "),s("p",[t._v("å¯¹äºå£°æ˜å¼å®ï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("é™¤äº†"),s("code",[t._v("$")]),t._v("å’Œåˆ†éš”ç¬¦ï¼ˆ"),s("code",[t._v("{}")]),t._v("ã€"),s("code",[t._v("()")]),t._v("ã€"),s("code",[t._v("[]")]),t._v("ï¼‰å¤–ä»»æ„tokenéƒ½å¯ä»¥ç”¨åœ¨æ¨¡å¼é‡Œé¢ï¼Œå¦‚")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("macro_rules!")]),t._v(" math "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("literal")]),t._v(" plus "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$b")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("literal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$a")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$b")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("square "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("literal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$a")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$a")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("æŠŠå®åŒ…è£…æˆå‡½æ•°æ¥å£å¯ä»¥é¿å…è¢« "),s("code",[t._v("cargo expand")]),t._v(" å±•å¼€ï¼Œæ¯”å¦‚æ•™ç¨‹ä¸­ä¸ºäº†ç®€æ´ï¼Œå°±å°½å¯èƒ½æŠŠ "),s("code",[t._v("println!")]),t._v(" å•ç‹¬åŒ…è£…åˆ°äº†å‡½æ•°é‡Œ")]),t._v(" "),s("blockquote",[s("p",[t._v("However, "),s("code",[t._v("macrokata")]),t._v(" tries to avoid (as much as possible) using macros we didn't define inside the main function. The reason for this is that, if we did use "),s("code",[t._v("println!")]),t._v(" you would see its expansion as well.")])])]),t._v(" "),s("li",[s("p",[t._v("é‡å¤çš„å‚æ•°æ¨¡å¼åªå¯ä»¥æ”¾åˆ°æœ«å°¾ï¼Œé™¤éæœ‰æ˜ç¡®çš„åˆ†éš”ç¬¦ï¼Œå¦åˆ™ä¸çŸ¥é“åˆ°åº•åŒ¹é…å¤šå°‘ä¸ªï¼Œä¼šå¸¦æ¥æ­§ä¹‰ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œæƒ³è¦è¡¨è¾¾è‡³å°‘æœ‰ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ç§æ˜¯ä¸å¯è¡Œçš„ï¼Œå› ä¸ºåœ¨åŒ¹é…è§„åˆ™çš„æ—¶å€™æ— æ³•å¾€åçœ‹æ˜¯å¦æ˜¯æœ€åä¸€ä¸ªå‚æ•°ã€‚")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// wrong! ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("macro_rules!")]),t._v(" sum "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$expr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("expr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$lastexpr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("expr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$expr")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$lastexpr")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// right!")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("macro_rules!")]),t._v(" sum "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$lastexpr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("expr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$expr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("expr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$lastexpr")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$expr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("å£°æ˜å¼çš„å®çš„åŒ¹é…å¸¦æœ‰é¡ºåºï¼ŒåŒ¹é…åˆ°åˆæ³•é¡¹åå°±ä¸ä¼šç»§ç»­åŒ¹é…äº†ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œ "),s("code",[t._v("'a'")]),t._v(" æ˜¯ä¸€ä¸ªå­—é¢é‡ï¼Œä½†æ˜¯åŒ¹é…åˆ°äº†ç¬¬ä¸€æ¡ï¼Œå¯¼è‡´ç¬¬äºŒæ¡æ›´åŠ ä¸¥æ ¼çš„æ¨¡å¼æ²¡æœ‰è¢«åŒ¹é…åˆ°ã€‚")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("macro_rules!")]),t._v(" ordering "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$j")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("expr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"This was an expression"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$j")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("literal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"This was a literal"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" expr1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("ordering!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token char string"}},[t._v("'a'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// => "This was an expression".')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" expr1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("ordering!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// => "This was an expression".')]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("åµŒå¥—çš„é‡å¤çš„å‚æ•°ï¼š"),s("code",[t._v("( $( $( $val:expr ),+ );+ )")]),t._v("ï¼Œå½“ç„¶ separator å¯ä»¥éšä¾¿æ›¿æ¢æˆä»»æ„é™¤"),s("code",[t._v("*")]),t._v("ã€"),s("code",[t._v("+")]),t._v("ã€"),s("code",[t._v("?")]),t._v("ï¼ˆè¿™ä¸‰ä¸ªç”¨äºæ¨¡å¼é‡Œé¢è¡¨ç¤ºé‡å¤æ¬¡æ•°ï¼Œæ‰€ä»¥ä¼šå¸¦æ¥æ­§ä¹‰ï¼‰ã€"),s("code",[t._v("$")]),t._v("ã€åˆ†éš”ç¬¦ä¹‹å¤–çš„tokenã€‚")])]),t._v(" "),s("li",[s("p",[t._v("å£°æ˜å¼å®è°ƒç”¨å£°æ˜å¼å®çš„æ—¶å€™ï¼Œå†…éƒ¨çš„å®èƒ½å¤Ÿçœ‹åˆ°çš„ASTæ˜¯ä¸é€æ˜çš„ï¼Œå› æ­¤ä¸€èˆ¬åªèƒ½å’Œå¤–ç•Œé‡‡ç”¨ç›¸åŒçš„å‚æ•°ç±»å‹ã€‚ä½†æ˜¯"),s("code",[t._v("ident")]),t._v("ã€"),s("code",[t._v("lifetime")]),t._v("ã€"),s("code",[t._v("tt")]),t._v("æ¯”è¾ƒç‰¹æ®Šï¼Œå¯ä»¥è¢«å†…éƒ¨çš„"),s("code",[t._v("literal")]),t._v(" åŒ¹é…ã€‚å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("macro_rules!")]),t._v(" foo "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$l")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("expr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("bar!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$l")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ERROR:               ^^ no rules expected this token in macro call")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("macro_rules!")]),t._v(" bar "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("foo!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// compiles OK")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("macro_rules!")]),t._v(" foo "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$l")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("tt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("bar!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$l")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("macro_rules!")]),t._v(" bar "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("foo!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("å®å¯ä»¥é€’å½’ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªå®")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token type-definition class-name"}},[t._v("LinkedList")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Node")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("i32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Box")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LinkedList")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Empty")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("macro_rules!")]),t._v(" linked_list "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LinkedList")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Empty")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$expr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("expr")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$exprs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("expr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LinkedList")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Node")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$expr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Box")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("new")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("linked_list!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$exprs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" my_list "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("linked_list!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("ä½†æ˜¯å®é€’å½’å¾ˆæ…¢ï¼Œå› æ­¤é»˜è®¤ rustc ä¼šæœ‰ 128 å±‚çš„é™åˆ¶ï¼Œå¯ä»¥åœ¨åŒ…å±‚é¢é…ç½®æ ‡ç­¾ "),s("code",[t._v('#![recursion_limit = "256"]')]),t._v("ã€‚")])])]),t._v(" "),s("h2",{attrs:{id:"æ”¶å½•æœ‰è¶£çš„å®æ ·ä¾‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ”¶å½•æœ‰è¶£çš„å®æ ·ä¾‹"}},[t._v("#")]),t._v(" æ”¶å½•æœ‰è¶£çš„å®æ ·ä¾‹")]),t._v(" "),s("p",[t._v("æœ¬ç« æ”¶å½•åˆ°çš„å®å°½å¯èƒ½çŸ­å°ã€ç‹¬ç«‹ã€æœ‰è¶£ã€‚")]),t._v(" "),s("h3",{attrs:{id:"ä½ è¿™å†™çš„å•¥å•Š"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä½ è¿™å†™çš„å•¥å•Š"}},[t._v("#")]),t._v(" ä½ è¿™å†™çš„å•¥å•Š")]),t._v(" "),s("p",[t._v("è®°å½•ä¸€ä¸‹è‡ªå·±å†™çš„ä¸€äº›æœ‰è¶£çš„å®ï¼Œä»¥é˜²ä¸‹æ¬¡ç¢°åˆ°è¿™ç§æƒ…å†µå¿˜è®°å’‹å†™ã€‚")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("è¿™é‡Œçš„å®é™…éœ€æ±‚æ˜¯å¤„ç†æ ‡ç­¾å®å‚æ•°ï¼Œç”¨äº† "),s("a",{attrs:{href:"https://crates.io/crates/darling",target:"_blank",rel:"noopener noreferrer"}},[t._v("darling"),s("OutboundLink")],1),t._v(" åº“åšè§£æï¼Œç„¶åå¤„ç†ä¸€äº› "),s("code",[t._v("Option")]),t._v(" ç±»å‹çš„å¯é€‰å‚æ•°ï¼Œå¦‚æœæ ‡ç­¾å®å‚æ•°ä¸­æ²¡æœ‰å®ƒï¼ˆå³ "),s("code",[t._v("darling")]),t._v(" è§£æå‡º "),s("code",[t._v("None")]),t._v("ï¼‰ï¼Œå°±ä¸ç†ä¼šå®ƒï¼Œåœ¨åç»­æ„é€ ä¸­ä½¿ç”¨é»˜è®¤å€¼ã€‚æ„Ÿè§‰æœ‰æ„æ€çš„åœ°æ–¹åœ¨äºè¿‡ç¨‹å®å’Œå£°æ˜å®çš„æ··åˆä½¿ç”¨ï¼Œåœ¨å†™å‡ºæ¥ä¹‹å‰æˆ‘æ²¡æƒ³åˆ°è¿™ä¹ˆå†™çœŸèƒ½è·‘ = =")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("macro_rules!")]),t._v(" expand_attribute "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$attr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("expr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mut")]),t._v(" token "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStream2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("new")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Some")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("val"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$attr")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("extend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("quote!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$attr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #val"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\n            token\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("ä½¿ç”¨æ—¶æ˜¯è¿™ä¹ˆç”¨çš„")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("darling"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FromMeta")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[derive(Debug, FromMeta)]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token type-definition class-name"}},[t._v("Attrs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[darling(default)]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" param1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Option")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("f64")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[darling(default)]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" param2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Option")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("f64")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[darling(default)]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" param3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Option")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("f64")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[derive(Debug, Default)]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token type-definition class-name"}},[t._v("Struct")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" param1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("f64")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" param2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("f64")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" neccessary"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// cannot be empty or any default value")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[proc_macro_attribute]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("an_attribute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("attr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStream")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Attrs")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        param1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        param2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Attrs::param3 is not useful in Struct")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("match")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Attrs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("from_list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("attr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ok")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" v"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("from")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write_errors")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" optional_params "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("expand_attribute!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("param1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" param2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" build_a_struct "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("quote!")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            neccessary"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0817"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n            #optional_params\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TL;DR")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("çœ‹å¾—å‡ºæ¥è¿˜æ˜¯æ¯”è¾ƒç¹ççš„ï¼Œ")])]),t._v(" "),s("li",[s("p",[t._v("è¿™é‡Œçš„å®é™…éœ€æ±‚æ˜¯ç”¨æ ‡ç­¾å®ä¿®æ”¹åŸå‡½æ•°è¿”å›å€¼ä¸º Resultï¼Œæ˜¯åœ¨ "),s("a",{attrs:{href:"https://github.com/sentinel-group/sentinel-rust",target:"_blank",rel:"noopener noreferrer"}},[t._v("sentinel-group/sentinel-rust"),s("OutboundLink")],1),t._v(" çš„å®ç°ä¸­ï¼Œç”¨æ¥å¿«é€Ÿç»™ä¸€ä¸ªå‡½æ•°æˆ–æ–¹æ³•åˆ›å»º sentinel çš„ã€‚å½“æ—¶çš„æƒ³æ³•æ˜¯ç”¨ Result æ¥è¡¨è¾¾æŸä¸ªæµæ˜¯å¦è¢«é˜»ç¢ï¼ŒåŒæ—¶å¯ä»¥ä¼ é€’ Sentinel çš„å‘Šè­¦ç»™ç”¨æˆ·ï¼Œå®ç°å‡ºæ¥çš„å¾ˆåƒåœ¾ï¼Œå¯ä»¥è¯´æ˜¯åªæ”¯æŒä½¿ç”¨ä¸€ä¸ªè§„åˆ™ã€‚æ²¡æœ‰è¯•è¿‡å¤šä¸ªè¿™æ ·çš„æ ‡ç­¾å®åµŒå¥—ï¼Œä½†æ˜¯ä¼°è®¡æ˜¯å›è°ƒåœ°ç‹±é‡ç°ä¸–é—´ ğŸ˜… ï¼ˆæˆ–è®¸å¯ä»¥ç”¨ "),s("code",[t._v("std::Result::flatten()")]),t._v(" æ¥é¿å…ï¼Œä½†æ˜¯å®ƒç›®å‰è¿˜æ˜¯ nightly çš„ APIï¼‰ã€‚")]),t._v(" "),s("p",[t._v("è¿™é‡Œçš„å®ç°ä¹Ÿæœ‰ç‚¹è ¢ï¼Œæ˜¯ç”¨çš„ quote å’Œ syn è‡ªåŠ¨è§£æçš„ä¿®æ”¹åçš„å‡½æ•°ç­¾åï¼Œå°è¯•è¿‡æ‰‹åŠ¨æ„é€ ï¼Œä½†æ˜¯å¤ªæ¶å¿ƒäº†æ„é€ ä¸æ¥ã€‚")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("crate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("process_func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mut")]),t._v(" func"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ItemFn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ItemFn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" output "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" func"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Currently, use quote/syn to automatically generate it,")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// don't know if there is a better way.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Seems hard to parse new ReturnType only or construct ReturnType by hand.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" dummy_func "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("match")]),t._v(" output "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReturnType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("quote!")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("dummy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Result")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReturnType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" return_type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("quote!")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("dummy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Result")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("#return_type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" dummy_func"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ItemFn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("syn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")])]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dummy_func"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unwrap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// replace the old ReturnType to the dummy function ReturnType")]),t._v("\n    func"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("output "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dummy_func"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    func\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"è¿˜å¾—å­¦ä¹ ä¸€ä¸ª"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è¿˜å¾—å­¦ä¹ ä¸€ä¸ª"}},[t._v("#")]),t._v(" è¿˜å¾—å­¦ä¹ ä¸€ä¸ª")]),t._v(" "),s("p",[t._v("æœ¬ç« èŠ‚æŠ„å½•ä¸€äº›åˆ«äººå†™çš„é»‘é­”æ³•å®ã€‚")]),t._v(" "),s("h4",{attrs:{id:"macrokata-ä¸­çš„æŸ¯é‡ŒåŒ–ç¤ºä¾‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#macrokata-ä¸­çš„æŸ¯é‡ŒåŒ–ç¤ºä¾‹"}},[t._v("#")]),t._v(" MacroKata ä¸­çš„æŸ¯é‡ŒåŒ–ç¤ºä¾‹")]),t._v(" "),s("h5",{attrs:{id:"åŒ¿åå‡½æ•°-è‡ªåŠ¨æ¨å¯¼è¿”å›ç±»å‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŒ¿åå‡½æ•°-è‡ªåŠ¨æ¨å¯¼è¿”å›ç±»å‹"}},[t._v("#")]),t._v(" åŒ¿åå‡½æ•° è‡ªåŠ¨æ¨å¯¼è¿”å›ç±»å‹")]),t._v(" "),s("p",[t._v("é€šè¿‡å£°æ˜å¼å®çš„é€’å½’é€å±‚å±•å¼€")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("macro_rules!")]),t._v(" curry "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$block")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("block")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$block")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argident")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("ident")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argtype")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("ty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argidents")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("ident")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argtypes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("ty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" _"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$block")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("block")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("move")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token closure-params"}},[s("span",{pre:!0,attrs:{class:"token closure-punctuation punctuation"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argident")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argtype")]),s("span",{pre:!0,attrs:{class:"token closure-punctuation punctuation"}},[t._v("|")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("print_curried_argument")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argident")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("curry!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argidents")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argtypes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" _"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$block")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" is_between "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("curry!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("min"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("i32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("i32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("i32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" _"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        min "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("item "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("item "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" max\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" curry_filter_between "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("curry!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("min"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("i32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("i32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vec"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vec")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("i32")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" _"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" filter_between "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("is_between")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("min"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        vec"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("iter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter_map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token closure-params"}},[s("span",{pre:!0,attrs:{class:"token closure-punctuation punctuation"}},[t._v("|")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token closure-punctuation punctuation"}},[t._v("|")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter_between")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Some")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("None")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("collect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" between_3_7 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curry_filter_between")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" between_5_10 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curry_filter_between")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" my_vec "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("vec!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 5,6")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" some_numbers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vec")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("i32")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("between_3_7")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("my_vec"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 6,7,9")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" more_numbers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vec")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("i32")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("between_5_10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("my_vec"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("h5",{attrs:{id:"æ˜¾ç¤ºå†™å‡ºè¿”å›ç±»å‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ˜¾ç¤ºå†™å‡ºè¿”å›ç±»å‹"}},[t._v("#")]),t._v(" æ˜¾ç¤ºå†™å‡ºè¿”å›ç±»å‹")]),t._v(" "),s("p",[t._v("ä¸‹é¢çš„"),s("code",[t._v("box_type!")]),t._v("å®åŒæ ·é€šè¿‡å£°æ˜å¼å®çš„é€’å½’æ„é€ å‡ºè¿”å›ç±»å‹")]),t._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("macro_rules!")]),t._v(" curry_unwrapper "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$block")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("block")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$block")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("ident")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argtype")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("ty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argnames")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("ident")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argtypes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("ty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$block")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("block")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Box")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("new")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("move")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token closure-params"}},[s("span",{pre:!0,attrs:{class:"token closure-punctuation punctuation"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argname")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argtype")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token closure-punctuation punctuation"}},[t._v("|")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("curry_unwrapper!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argnames")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argtypes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$block")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("macro_rules!")]),t._v(" box_type "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("ty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$type")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("ty")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argtypes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("ty")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$restype")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("ty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Box")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("dyn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Fn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("box_type!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argtypes")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$restype")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("macro_rules!")]),t._v(" curry_fn "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ident")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("ident")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("ident")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argtype")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("ty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argnames")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("ident")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argtypes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("ty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$restype")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("ty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$block")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token fragment-specifier punctuation"}},[t._v("block")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ident")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argtype")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("box_type!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argtypes")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$restype")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("curry_unwrapper!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argnames")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$argtypes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$block")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("curry_fn!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("add"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("i32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("i32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("i32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("i32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("i32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" d\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" res "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"references"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[t._v("#")]),t._v(" References")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://doc.rust-lang.org/book/ch19-06-macros.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Macros - The Rust Programming Language (rust-lang.org)"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://doc.rust-lang.org/reference/macros.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Macros - The Rust Reference"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://danielkeep.github.io/tlborm/book/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("The Little Book of Rust Macros"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://dengjianping.github.io/2019/02/28/%E5%A6%82%E4%BD%95%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E8%BF%87%E7%A8%8B%E5%AE%8F(proc-macro).html",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¦‚ä½•ç¼–å†™ä¸€ä¸ªè¿‡ç¨‹å®(proc-macro)"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://tfpk.github.io/macrokata/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MacroKata - Exercises for Rust Macros"),s("OutboundLink")],1)]),t._v(" "),s("Comment",{attrs:{lang:"zh-CN"}})],1)}),[],!1,null,null,null);a.default=e.exports}}]);