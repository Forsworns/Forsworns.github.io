(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{524:function(e,t,r){"use strict";r.r(t);var n=r(12),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("p"),r("div",{staticClass:"table-of-contents"},[r("ul",[r("li",[r("a",{attrs:{href:"#tonic"}},[e._v("Tonic")])]),r("li",[r("a",{attrs:{href:"#volo"}},[e._v("Volo")])]),r("li",[r("a",{attrs:{href:"#actix-web"}},[e._v("Actix Web")])]),r("li",[r("a",{attrs:{href:"#rocket"}},[e._v("Rocket")])]),r("li",[r("a",{attrs:{href:"#axum"}},[e._v("Axum")])]),r("li",[r("a",{attrs:{href:"#one-more-thing"}},[e._v("One More Thing")])]),r("li",[r("a",{attrs:{href:"#sentinel-rust-resources"}},[e._v("Sentinel-Rust Resources")])])])]),r("p"),e._v(" "),r("h1",{attrs:{id:"sentinel-rust-middleware-supports"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#sentinel-rust-middleware-supports"}},[e._v("#")]),e._v(" Sentinel-Rust Middleware Supports")]),e._v(" "),r("p",[e._v("Currently "),r("a",{attrs:{href:"https://github.com/sentinel-group/sentinel-rust",target:"_blank",rel:"noopener noreferrer"}},[e._v("Sentinel-Rust"),r("OutboundLink")],1),e._v(" supports following RPC/Web frameworks, and provides thorough "),r("a",{attrs:{href:"https://github.com/sentinel-group/sentinel-rust/tree/main/middleware",target:"_blank",rel:"noopener noreferrer"}},[e._v("examples"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("h2",{attrs:{id:"tonic"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#tonic"}},[e._v("#")]),e._v(" Tonic")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://crates.io/crates/tonic",target:"_blank",rel:"noopener noreferrer"}},[e._v("Tonic"),r("OutboundLink")],1),e._v(" is A rust implementation of "),r("a",{attrs:{href:"https://grpc.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("gRPC"),r("OutboundLink")],1),e._v(", a high performance, open source, general RPC framework that puts mobile and HTTP/2 first.")]),e._v(" "),r("p",[e._v("The are two kinds of middlewares in Tonic.")]),e._v(" "),r("p",[e._v("- "),r("a",{attrs:{href:"https://docs.rs/tonic/latest/tonic/service/interceptor/trait.Interceptor.html",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("tonic::service::interceptor::Interceptor")]),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("- "),r("a",{attrs:{href:"https://docs.rs/tower/latest/tower/trait.Service.html",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("tower::Service")]),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("We have implemented both of them, see "),r("a",{attrs:{href:"https://crates.io/crates/sentinel-tower",target:"_blank",rel:"noopener noreferrer"}},[e._v("sentinel-tower"),r("OutboundLink")],1),e._v(" and "),r("a",{attrs:{href:"https://crates.io/crates/sentinel-tonic",target:"_blank",rel:"noopener noreferrer"}},[e._v("sentinel-tonic"),r("OutboundLink")],1),e._v(" on crates.io.")]),e._v(" "),r("p",[e._v("Here is a "),r("a",{attrs:{href:"https://forsworns.github.io/zh/blogs/20221108/",target:"_blank",rel:"noopener noreferrer"}},[e._v("post"),r("OutboundLink")],1),e._v(" related to its implementation.")]),e._v(" "),r("h2",{attrs:{id:"volo"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#volo"}},[e._v("#")]),e._v(" Volo")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://crates.io/crates/volo",target:"_blank",rel:"noopener noreferrer"}},[e._v("Volo"),r("OutboundLink")],1),e._v(" is a high-performance and strong-extensibility Rust RPC framework that helps developers build microservices.")]),e._v(" "),r("p",[e._v("Different from the Tower in Tonic, Volo uses the "),r("a",{attrs:{href:"https://github.com/cloudwego/motore",target:"_blank",rel:"noopener noreferrer"}},[e._v("Motore"),r("OutboundLink")],1),e._v(" for service abstraction.")]),e._v(" "),r("p",[e._v("For more information, see "),r("a",{attrs:{href:"https://crates.io/crates/sentinel-motore",target:"_blank",rel:"noopener noreferrer"}},[e._v("sentinel-motore"),r("OutboundLink")],1),e._v(" on crates.io.")]),e._v(" "),r("p",[e._v("Here is a "),r("a",{attrs:{href:"https://forsworns.github.io/zh/blogs/20221108/",target:"_blank",rel:"noopener noreferrer"}},[e._v("post"),r("OutboundLink")],1),e._v(" related to its implementation.")]),e._v(" "),r("h2",{attrs:{id:"actix-web"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#actix-web"}},[e._v("#")]),e._v(" Actix Web")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://crates.io/crates/actix-web",target:"_blank",rel:"noopener noreferrer"}},[e._v("Actix Web"),r("OutboundLink")],1),e._v(" is a powerful, pragmatic, and extremely fast web framework for Rust")]),e._v(" "),r("p",[e._v("In general, a middleware in Actix Web is a type that implements the "),r("a",{attrs:{href:"https://docs.rs/actix-web/4/actix_web/dev/trait.Service.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Service trait"),r("OutboundLink")],1),e._v(" and "),r("a",{attrs:{href:"https://docs.rs/actix-web/4/actix_web/dev/trait.Transform.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Transform trait"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("p",[e._v("For more information, see "),r("a",{attrs:{href:"https://crates.io/crates/sentinel-actix",target:"_blank",rel:"noopener noreferrer"}},[e._v("sentinel-actix"),r("OutboundLink")],1),e._v(" on crates.io.")]),e._v(" "),r("p",[e._v("Here is a "),r("a",{attrs:{href:"https://forsworns.github.io/zh/blogs/20221108/",target:"_blank",rel:"noopener noreferrer"}},[e._v("post"),r("OutboundLink")],1),e._v(" related to routers and handlers in the Actix-Web.")]),e._v(" "),r("h2",{attrs:{id:"rocket"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#rocket"}},[e._v("#")]),e._v(" Rocket")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://crates.io/crates/rocket",target:"_blank",rel:"noopener noreferrer"}},[e._v("Rocket"),r("OutboundLink")],1),e._v(" is a web framework for Rust that makes it simple to write fast, secure web applications without sacrificing flexibility, usability, or type safety.")]),e._v(" "),r("p",[e._v("There are two ways to implement a Sentinel middleware in Rocket.")]),e._v(" "),r("p",[e._v("Intuitively, we can implement the "),r("a",{attrs:{href:"https://api.rocket.rs/v0.5-rc/rocket/fairing/trait.Fairing.html",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("Fairing")]),r("OutboundLink")],1),e._v(" trait, just as the common "),r("code",[e._v("Service")]),e._v(" traits in other frameworks.")]),e._v(" "),r("p",[e._v("However, as documented in the Rocket guide,")]),e._v(" "),r("blockquote",[r("p",[e._v("Rocketâ€™s fairings are a lot like middleware from other frameworks, but they bear a few key distinctions:")]),e._v(" "),r("ul",[r("li",[e._v("Fairings "),r("strong",[e._v("cannot")]),e._v(" terminate or respond to an incoming request directly.")]),e._v(" "),r("li",[e._v("Fairings "),r("strong",[e._v("cannot")]),e._v(" inject arbitrary, non-request data into a request.")]),e._v(" "),r("li",[e._v("Fairings "),r("em",[e._v("can")]),e._v(" prevent an application from launching.")]),e._v(" "),r("li",[e._v("Fairings "),r("em",[e._v("can")]),e._v(" inspect and modify the application's configuration.")])])]),e._v(" "),r("p",[e._v("Since it cannot terminate or respond to the request directly, the implemented "),r("code",[e._v("SentinelFairing")]),e._v(" simply rewrites the URI in the Request to a given route. It can be configured via its own methods or "),r("a",{attrs:{href:"https://rocket.rs/v0.5-rc/guide/state/#managed-state",target:"_blank",rel:"noopener noreferrer"}},[e._v("managed state"),r("OutboundLink")],1),e._v(" of "),r("code",[e._v("SentinelConfig")]),e._v(".")]),e._v(" "),r("p",[e._v("In fact, Rocket "),r("a",{attrs:{href:"https://rocket.rs/v0.5-rc/guide/fairings/#overview",target:"_blank",rel:"noopener noreferrer"}},[e._v("suggests"),r("OutboundLink")],1),e._v(" using request guards, instead of Fairing in this case,")]),e._v(" "),r("blockquote",[r("p",[e._v("As a general rule of thumb, only "),r("em",[e._v("globally applicable")]),e._v(" actions should be effected through fairings. You should *"),r("strong",[e._v("not*")]),e._v(" use a fairing to implement authentication or authorization (preferring to use a "),r("a",{attrs:{href:"https://rocket.rs/v0.5-rc/guide/requests/#request-guards",target:"_blank",rel:"noopener noreferrer"}},[e._v("request guard"),r("OutboundLink")],1),e._v(" instead) "),r("em",[e._v("unless")]),e._v(" the authentication or authorization applies to all or the overwhelming majority of the application. On the other hand, you "),r("em",[e._v("should")]),e._v(" use a fairing to record timing and usage statistics or to enforce global security policies.")])]),e._v(" "),r("p",[e._v("So we follow this "),r("a",{attrs:{href:"https://rocket.rs/v0.5-rc/guide/requests/#request-guards",target:"_blank",rel:"noopener noreferrer"}},[e._v("suggestion"),r("OutboundLink")],1)]),e._v(" "),r("blockquote",[r("p",[e._v("Request guards appear as inputs to handlers. An arbitrary number of request guards can appear as arguments in a route handler. Rocket will automatically invoke the "),r("a",{attrs:{href:"https://api.rocket.rs/v0.5-rc/rocket/request/trait.FromRequest.html",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("FromRequest")]),r("OutboundLink")],1),e._v(" implementation for request guards before calling the handler. Rocket only dispatches requests to a handler when all of its guards pass.")])]),e._v(" "),r("p",[e._v("and implemented a "),r("code",[e._v("SentinelGuard")]),e._v(". It can be configured via the "),r("a",{attrs:{href:"https://rocket.rs/v0.5-rc/guide/state/#managed-state",target:"_blank",rel:"noopener noreferrer"}},[e._v("managed state"),r("OutboundLink")],1),e._v(" of "),r("code",[e._v("SentinelConfig")]),e._v(",")]),e._v(" "),r("p",[e._v("For more information, see "),r("a",{attrs:{href:"https://crates.io/crates/sentinel-rocket",target:"_blank",rel:"noopener noreferrer"}},[e._v("sentinel-rocket"),r("OutboundLink")],1),e._v(" on crates.io.")]),e._v(" "),r("h2",{attrs:{id:"axum"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#axum"}},[e._v("#")]),e._v(" Axum")]),e._v(" "),r("p",[r("a",{attrs:{href:""}},[e._v("Axum")]),e._v(" is a web application framework that focuses on ergonomics and modularity.")]),e._v(" "),r("blockquote",[r("p",[e._v("In particular the last point is what sets "),r("code",[e._v("axum")]),e._v(" apart from other frameworks. "),r("code",[e._v("axum")]),e._v(" doesn't have its own middleware system but instead uses "),r("a",{attrs:{href:"https://docs.rs/tower/latest/tower/trait.Service.html",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("tower::Service")]),r("OutboundLink")],1),e._v(". This means "),r("code",[e._v("axum")]),e._v(" gets timeouts, tracing, compression, authorization, and more, for free. It also enables you to share middleware with applications written using "),r("a",{attrs:{href:"https://crates.io/crates/hyper",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("hyper")]),r("OutboundLink")],1),e._v(" or "),r("a",{attrs:{href:"https://crates.io/crates/tonic",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("tonic")]),r("OutboundLink")],1),e._v(".")])]),e._v(" "),r("p",[e._v("Therefore, we can reuse the middleware in "),r("a",{attrs:{href:"https://crates.io/crates/sentinel-tower",target:"_blank",rel:"noopener noreferrer"}},[e._v("sentinel-tower"),r("OutboundLink")],1),e._v(". For more information, visit our "),r("a",{attrs:{href:"https://github.com/sentinel-group/sentinel-rust/tree/main/middleware/axum",target:"_blank",rel:"noopener noreferrer"}},[e._v("example for Axum"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("h2",{attrs:{id:"one-more-thing"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#one-more-thing"}},[e._v("#")]),e._v(" One More Thing")]),e._v(" "),r("p",[e._v("Currently, "),r("a",{attrs:{href:"https://github.com/sentinel-group/sentinel-rust/wiki/Usage#via-dynamic-datasource",target:"_blank",rel:"noopener noreferrer"}},[e._v("dynamic datasources"),r("OutboundLink")],1),e._v(" for sentinel are implemented directly in "),r("a",{attrs:{href:"https://crates.io/crates/sentinel-core",target:"_blank",rel:"noopener noreferrer"}},[e._v("sentinel-core"),r("OutboundLink")],1),e._v(" as customized features. Maybe similar to these middlewares, splitting datasources into individual crates or a single crate with customized features is better...")]),e._v(" "),r("h2",{attrs:{id:"sentinel-rust-resources"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#sentinel-rust-resources"}},[e._v("#")]),e._v(" Sentinel-Rust Resources")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://github.com/sentinel-group/sentinel-rust/wiki",target:"_blank",rel:"noopener noreferrer"}},[e._v("Tutorial"),r("OutboundLink")],1),e._v(" "),r("a",{attrs:{href:"https://docs.rs/sentinel-core/latest/sentinel_core/",target:"_blank",rel:"noopener noreferrer"}},[e._v(" API Doc"),r("OutboundLink")],1),e._v(" "),r("a",{attrs:{href:"https://github.com/sentinel-group/sentinel-rust/tree/main/examples",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example Codes"),r("OutboundLink")],1)]),e._v(" "),r("Comment",{attrs:{lang:"zh-CN"}})],1)}),[],!1,null,null,null);t.default=a.exports}}]);