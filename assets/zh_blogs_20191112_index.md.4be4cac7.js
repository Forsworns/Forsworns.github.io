import{_ as t,c as e,o as s,e as a}from"./app.066d79bf.js";const o="/assets/grub.742f2307.png",C=JSON.parse('{"title":"Ubuntu启动Grub引导错误","description":"重装双系统碰到的Grub引导错误","frontmatter":{"title":"Ubuntu启动Grub引导错误","description":"重装双系统碰到的Grub引导错误","tags":["配环境","unix"]},"headers":[{"level":3,"title":"解决方案","slug":"解决方案","link":"#解决方案","children":[]},{"level":3,"title":"引导文件修复","slug":"引导文件修复","link":"#引导文件修复","children":[]}],"relativePath":"zh/blogs/20191112/index.md"}'),n={name:"zh/blogs/20191112/index.md"},l=a('<h1 id="ubuntu启动grub引导错误" tabindex="-1">Ubuntu启动Grub引导错误 <a class="header-anchor" href="#ubuntu启动grub引导错误" aria-hidden="true">#</a></h1><nav class="table-of-contents"><ul><li><a href="#解决方案">解决方案</a></li><li><a href="#引导文件修复">引导文件修复</a></li></ul></nav><p>把系统玩坏了，重新安装系统后，发现启动不了Ubuntu系统，会停留在Grub界面，类似下图</p><p><img src="'+o+`" alt=""></p><p>首先在这个界面下可以输入<code>exit</code> 回到windows的启动</p><h3 id="解决方案" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案" aria-hidden="true">#</a></h3><p>通过阅读Grub2的帮助文档，可以发现解决方案（<a href="https://help.ubuntu.com/community/Grub2/Troubleshooting" target="_blank" rel="noreferrer">文档链接</a>）</p><p>使用如下命令手动挂载image</p><table><thead><tr><th style="text-align:left;">步骤</th><th>说明</th></tr></thead><tbody><tr><td style="text-align:left;">1. <code>set root=(hdX,Y)</code></td><td>Confirm the correct X,Y values and press ENTER.</td></tr><tr><td style="text-align:left;"></td><td>Example: If the Ubuntu system is on sda5, enter: <code>set root=(hd0,12)</code></td></tr><tr><td style="text-align:left;">2. <code>linux /vmlinuz root=/dev/sdXY ro</code></td><td>Example: <code>linux /vmlinuz root=/dev/sda12 ro</code></td></tr><tr><td style="text-align:left;"></td><td>If the <em>vmlinuz</em> symlink does not exist, use the full path to the kernel in <code>/boot</code>. Example: <code>linux /boot/vmlinuz-3.2.0-14-generic root=/dev/sda1 ro</code></td></tr><tr><td style="text-align:left;">3. <code>initrd /initrd-xxx-xxx.img</code></td><td>Selects the latest initrd image. If the <em>initrd</em> symlink does not exist, use the full path to the initrd image in <code>/boot</code> as above <code>vmlinuz</code>.</td></tr><tr><td style="text-align:left;">4. <code>boot</code></td><td>Boot to the latest kernel on the selected partition.</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>GNU GRUB（GRand Unified Bootloader，简称“GRUB”）是一个来自GNU项目的多操作系统启动程序。GRUB是多启动规范的实现，它允许用户可以在计算机内同时拥有多个操作系统，并在计算机启动时选择希望运行的操作系统。GRUB可用于选择操作系统分区上的不同内核，也可用于向这些内核传递启动参数。</p></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>vmlinuz指的是内核，作用：进程管理、内存管理、文件管理、驱动管理、网络管理。</p><p>initrd.img是一个小的映象， 放的是和启动相关的驱动模块。通常的步骤是先启动内核，然后内核挂载initrd.img，并执行里面的脚本来进一步挂载各种各样的模块。其中最重要的就是根文件系统驱动模块，有了它才能挂载根文件系统，继而运行用户空间的第一个应用程序init或者systemd，完成系统后续的启动。</p></div><h3 id="引导文件修复" tabindex="-1">引导文件修复 <a class="header-anchor" href="#引导文件修复" aria-hidden="true">#</a></h3><p>成功进入系统后，使用如下命令对引导程序进行修复</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 修复grub</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update-grub</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">grub-install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/dev/sda</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">reboot</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">#重启</span></span>
<span class="line"></span></code></pre></div><p>也可以试着回到windows中修改启动项，以管理员的身份在cmd中敲入命令：</p><p><code>bcdedit /set &quot;{bootmgr}&quot; path \\EFI\\ubuntu\\grubx64.efi</code></p><p>实在不行推荐使用<code>boot-repair</code>工具</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add-apt-repository</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ppa:yannubuntu/boot-repair</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt-get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt-get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">boot-repair</span></span>
<span class="line"></span></code></pre></div><p>之后在应用菜单中选择boot-repair（引导修复）使用该工具修复。如果修复后出现了多余的启动项，在<code>/boot/grub/grub.cfg </code>中删掉相关的条目即可。</p>`,19),p=[l];function r(d,i,c,u,h,b){return s(),e("div",null,p)}const g=t(n,[["render",r]]);export{C as __pageData,g as default};
