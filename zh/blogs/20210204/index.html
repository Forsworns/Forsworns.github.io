<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>为什么同一个文件在不同电脑上大小不一样 | Blog</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/ionicons/2.0.1/css/ionicons.min.css">
    <script src="https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script>
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.83acc708.css" as="style"><link rel="preload" href="/assets/js/app.03eef16c.js" as="script"><link rel="preload" href="/assets/js/1.489a6dc0.js" as="script"><link rel="preload" href="/assets/js/26.80db83e6.js" as="script"><link rel="preload" href="/assets/js/13.1be78326.js" as="script"><link rel="prefetch" href="/assets/js/10.1e5f9f8a.js"><link rel="prefetch" href="/assets/js/11.30d692aa.js"><link rel="prefetch" href="/assets/js/12.13c4f3e7.js"><link rel="prefetch" href="/assets/js/14.dad01fde.js"><link rel="prefetch" href="/assets/js/15.dab14606.js"><link rel="prefetch" href="/assets/js/16.81b53128.js"><link rel="prefetch" href="/assets/js/17.4e546b34.js"><link rel="prefetch" href="/assets/js/18.ee20e865.js"><link rel="prefetch" href="/assets/js/19.413a43b3.js"><link rel="prefetch" href="/assets/js/20.d0743f7f.js"><link rel="prefetch" href="/assets/js/21.6fb5574c.js"><link rel="prefetch" href="/assets/js/22.da977171.js"><link rel="prefetch" href="/assets/js/23.45381ef0.js"><link rel="prefetch" href="/assets/js/24.38d9dd4c.js"><link rel="prefetch" href="/assets/js/25.5db9e4c1.js"><link rel="prefetch" href="/assets/js/27.a83b4387.js"><link rel="prefetch" href="/assets/js/28.06b9589c.js"><link rel="prefetch" href="/assets/js/29.73cd5ef9.js"><link rel="prefetch" href="/assets/js/3.f34d884e.js"><link rel="prefetch" href="/assets/js/30.e1abbf1f.js"><link rel="prefetch" href="/assets/js/31.a626951c.js"><link rel="prefetch" href="/assets/js/32.94966377.js"><link rel="prefetch" href="/assets/js/33.d2c521bc.js"><link rel="prefetch" href="/assets/js/34.34f7d3af.js"><link rel="prefetch" href="/assets/js/35.8bf75e4e.js"><link rel="prefetch" href="/assets/js/36.ca54e505.js"><link rel="prefetch" href="/assets/js/37.d5208cb4.js"><link rel="prefetch" href="/assets/js/38.4b405137.js"><link rel="prefetch" href="/assets/js/39.7e030510.js"><link rel="prefetch" href="/assets/js/4.76f729c6.js"><link rel="prefetch" href="/assets/js/40.34d04083.js"><link rel="prefetch" href="/assets/js/41.f3512b86.js"><link rel="prefetch" href="/assets/js/42.335cb33e.js"><link rel="prefetch" href="/assets/js/43.5b6fd6c5.js"><link rel="prefetch" href="/assets/js/44.c55d0f35.js"><link rel="prefetch" href="/assets/js/45.f07d95ce.js"><link rel="prefetch" href="/assets/js/46.a3a65fea.js"><link rel="prefetch" href="/assets/js/47.9b0ada11.js"><link rel="prefetch" href="/assets/js/48.9eaab22b.js"><link rel="prefetch" href="/assets/js/49.727f6647.js"><link rel="prefetch" href="/assets/js/5.b4527e5b.js"><link rel="prefetch" href="/assets/js/50.ef2b4cd0.js"><link rel="prefetch" href="/assets/js/51.de50578a.js"><link rel="prefetch" href="/assets/js/52.3de8cb04.js"><link rel="prefetch" href="/assets/js/53.0fc39334.js"><link rel="prefetch" href="/assets/js/54.d2fc8318.js"><link rel="prefetch" href="/assets/js/55.26c3bd92.js"><link rel="prefetch" href="/assets/js/56.d73d8ed7.js"><link rel="prefetch" href="/assets/js/57.b83c8a85.js"><link rel="prefetch" href="/assets/js/58.21b3c441.js"><link rel="prefetch" href="/assets/js/59.7ea75a77.js"><link rel="prefetch" href="/assets/js/6.1632bb8f.js"><link rel="prefetch" href="/assets/js/60.8bb3f815.js"><link rel="prefetch" href="/assets/js/61.c3ce4537.js"><link rel="prefetch" href="/assets/js/62.f9a8f980.js"><link rel="prefetch" href="/assets/js/63.f4f21d25.js"><link rel="prefetch" href="/assets/js/64.a2e5a572.js"><link rel="prefetch" href="/assets/js/65.fcadeb7e.js"><link rel="prefetch" href="/assets/js/66.64e2bfe0.js"><link rel="prefetch" href="/assets/js/67.43d60bda.js"><link rel="prefetch" href="/assets/js/68.584a1d82.js"><link rel="prefetch" href="/assets/js/69.134eaf20.js"><link rel="prefetch" href="/assets/js/7.2bde248f.js"><link rel="prefetch" href="/assets/js/70.289946fe.js"><link rel="prefetch" href="/assets/js/71.e5d6db5e.js"><link rel="prefetch" href="/assets/js/72.568228d9.js"><link rel="prefetch" href="/assets/js/73.3f4f5d3a.js"><link rel="prefetch" href="/assets/js/74.a4d77c9e.js"><link rel="prefetch" href="/assets/js/75.c9d6eda1.js"><link rel="prefetch" href="/assets/js/8.37029413.js"><link rel="prefetch" href="/assets/js/9.963a8ee4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.83acc708.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zh/" class="home-link router-link-active"><img src="/title.png" alt="Blog" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zh/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/zh/about-me/" class="nav-link">
  关于我
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="博客" class="mobile-dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/blogs/" class="nav-link router-link-active">
  所有博客
</a></li><li class="dropdown-item"><!----> <a href="/zh/blogs/category/" class="nav-link">
  标签分类
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/blogs/20210204/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/Forsworns/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/zh/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/zh/about-me/" class="nav-link">
  关于我
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="博客" class="mobile-dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/blogs/" class="nav-link router-link-active">
  所有博客
</a></li><li class="dropdown-item"><!----> <a href="/zh/blogs/category/" class="nav-link">
  标签分类
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/blogs/20210204/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/Forsworns/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#簇的大小导致了文件大小不同">簇的大小导致了文件大小不同</a></li><li><a href="#实例分析">实例分析</a><ul><li><a href="#但是文件管理器显示的是-1kb-而不是-4kb">但是文件管理器显示的是 1KB，而不是 4KB</a></li></ul></li><li><a href="#补充">补充</a></li><li><a href="#references">References</a></li></ul></div><p></p> <h1 id="为什么同一个文件在不同电脑上大小不一样"><a href="#为什么同一个文件在不同电脑上大小不一样" class="header-anchor">#</a> 为什么同一个文件在不同电脑上大小不一样</h1> <p>今天一个朋友问了我一个问题：为啥同一个文件在不同电脑上大小不一样啊？为啥啊？我直接懵了，这啥啊？为啥啊？直到看到了一篇文章<a href="#ref1"><sup>[1]</sup></a>，才解答了我和朋友的困惑。</p> <h2 id="簇的大小导致了文件大小不同"><a href="#簇的大小导致了文件大小不同" class="header-anchor">#</a> 簇的大小导致了文件大小不同</h2> <p>事实上这种事情经常发生，比如你在云盘上存小视频，明明它是 60G。结果下载下来以后，发现你的文件夹变成 80G 了，难道人家还赠送了你 20G 的小视频？这当然不可能发生。</p> <p>核心原因就是</p> <ul><li>磁盘空间是按簇来划分的。即使是一个 Byte 大小的文件也会占用一个簇的空间。</li> <li>磁盘格式化时可以设置簇大小，一般从 512 到 131,072 Bytes。</li> <li>不同的实用程序以不同的方式显示磁盘空间。</li> <li>网盘一般显示的是文件的实际大小。</li></ul> <h2 id="实例分析"><a href="#实例分析" class="header-anchor">#</a> 实例分析</h2> <p>假设你有一个 1 Byte 的文件，你用命令行查看会是 1 Byte，用文件浏览器看他又成了 1 KB。</p> <p><img src="data:image/png;base64,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" alt="A one-byte file, listed in the Windows Command Prompt"></p> <p><img src="D:%5Ccode%5Cblog%5Cblog%5Czh%5Cblogs%5C20210204%5Cone-byte-file-explorer-600x133.png" alt="A one-byte file, listed in the Windows File Explorer"></p> <p>数据在磁盘上会存放在大小为 512 或 4096 Bytes 的扇区上。文件存储系统会记录文件在磁盘上的存储方式相关信息，包括是在哪个扇区上。但是文件系统一般不会一个一个扇区地进行记录和跟踪，而是把多个扇区并在一起管理，称为簇。</p> <p>簇一般是 1, 2, 4, 8, 16 或更多个相邻扇区。文件系统会记录文件的位置，并维护一个列表，记录分配给文件的簇。</p> <p>使用 CHKDSK 命令可以查看簇大小（即下图中的一个 allocation unit）。</p> <p><img src="D:%5Ccode%5Cblog%5Cblog%5Czh%5Cblogs%5C20210204%5Cchkdsk-report.png" alt="CHKDSK report showing cluster size"></p> <p>理论上，当我们创建一个 1 Byte 大小的文件，文件系统会：</p> <ul><li>在他的文件表中创建一个列表项，俗称为”directory listing”。</li> <li>从磁盘上分配一个簇来存储文件。</li> <li>将数据写到磁盘中。</li></ul> <p>文件将会被被分配一个簇，即使他不需要这么大的空间。假设簇大小是上图的 4KB，则一个 1 Byte 的文件会消耗 4KB 空间，当它变成 4097 Byte 的时候，它会占用两个簇，从而是 8KB 的空间。</p> <h3 id="但是文件管理器显示的是-1kb-而不是-4kb"><a href="#但是文件管理器显示的是-1kb-而不是-4kb" class="header-anchor">#</a> 但是文件管理器显示的是 1KB，而不是 4KB</h3> <p>事实上，文件系统不止需要记录文件的数据，也需要记录文件名、分配给它的簇、时间戳、标签、权限等等诸多信息，所有的这些元数据（meta-data）都占用了文件 directory listing 中的空间。</p> <p>在 NTFS 文件系统中，directory listing 的空间是一整块进行分配的，不管元数据实际有多大，每次分配都会是 1,024 Bytes。</p> <p>所以是这么优化的：当文件很小的时候，不分配簇，而是利用 directory listing 中的剩余空间去存放它。这样，就可以节约簇的分配（这也是为什么你甚至可以看到文件属性中，文件的实际大小比占用空间小，占用空间甚至是0的情况）。</p> <h2 id="补充"><a href="#补充" class="header-anchor">#</a> 补充</h2> <p>在fat32文件系统的情况下，分区大小在2GB～8GB时簇的大小为4KB；分区大小在8GB～16GB时簇的大小为8KB；分区大小在 16GB～32GB时，簇的大小则达到了16KB。而ntfs格式中，当分区的大小在2GB以下时，簇的大小都比相应的fat32簇小；当分区的大小在2GB以上时(2GB～2TB)，簇的大小都为4KB。也就是说，ntfs可以比fat32更有效地管理磁盘空间，最大限度地避免了磁盘空间的浪费。</p> <h2 id="references"><a href="#references" class="header-anchor">#</a> References</h2> <ol><li><a href="https://askleo.com/why-is-the-same-file-a-different-size-in-different-places/" target="_blank" rel="noopener noreferrer">Why is the Same File a Different Size in Different Places?<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <div id="ref1"></div></li></ol> <div class="gitalk-container"><div id="gitalk-container"></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/6/13 上午8:47:05</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.03eef16c.js" defer></script><script src="/assets/js/1.489a6dc0.js" defer></script><script src="/assets/js/26.80db83e6.js" defer></script><script src="/assets/js/13.1be78326.js" defer></script>
  </body>
</html>
